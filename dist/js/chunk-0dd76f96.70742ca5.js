(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dd76f96"],{"22b8":function(e,t,a){},"2b41":function(e,t,a){"use strict";a("9e1f"),a("450d");var l=a("6ed5"),i=a.n(l),r=(a("0fb7"),a("f529")),s=a.n(r),o=(a("d9e2"),a("bc3a")),n=a.n(o),c=a("4360"),u=a("5f87");const p=n.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_API,timeout:5e4});p.interceptors.request.use(e=>(c["a"].getters.token&&(e.headers["token"]=Object(u["a"])()),e),e=>(console.log(e),Promise.reject(e))),p.interceptors.response.use(e=>{const t=e.data;return 200===t.state||null===t.mess||"查询成功"===t.mess||"查询所有文章成功"===t.mess||"添加文章成功"===t.mess||"删除文章成功"===t.mess||"修改文章成功"===t.mess||"展示科技成功图片成功"===t.mess||"string"===t.mess?t:2e4!==t.code?(s()({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||i.a.confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then(()=>{c["a"].dispatch("user/resetToken").then(()=>{location.reload()})}),Promise.reject(new Error(t.message||"Error"))):t},e=>(console.log("err"+e),s()({message:e.message,type:"error",duration:5e3}),Promise.reject(e))),t["a"]=p},a222:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return o}));var l=a("2b41");const i=()=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/AchievementOfPhoto/queryPhotoType",method:"post"}),r=e=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/AchievementOfPhoto/list",params:{page:e.current,size:e.number},method:"get"}),s=(e,t)=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/AchievementOfPhoto/queryPhotoByType",params:{typeId:e,page:t.current,size:t.number},method:"post"}),o=(e,t)=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/AchievementOfPhoto/delete",params:{id:e,imgName:t},method:"post"})},e3fb:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.AddPictureVisible=!0}}},[e._v("添加")]),t("el-dialog",{attrs:{title:"添加",visible:e.AddPictureVisible,"show-close":!1,width:"65%"},on:{"update:visible":function(t){e.AddPictureVisible=t}}},[t("h2",{staticStyle:{"text-align":"center"}},[e._v("添加轮播图")]),t("el-form",{staticStyle:{marginTop:"15px"},attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:"轮播图名称",prop:"title"}},[t("el-input",{attrs:{placeholder:"请填写轮播图名称"},model:{value:e.fileData.title,callback:function(t){e.$set(e.fileData,"title",t)},expression:"fileData.title"}})],1),t("el-form-item",{staticStyle:{marginTop:"10px"},attrs:{label:"轮播图类型"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择文章所属类型"},model:{value:e.fileData.type,callback:function(t){e.$set(e.fileData,"type",t)},expression:"fileData.type"}},e._l(e.typeOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.type,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"轮播图素材"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-change":e.handleChange,data:e.fileData,"auto-upload":!1,action:"http://175.178.83.49:9108/servicefile/AchievementOfPhoto/upload","list-type":"picture-card"}},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible,modal:!1,center:!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{src:e.dialogImageUrl,width:"85%",alt:""}})])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.AddPictureVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveOrUpdate}},[e._v("确 定")])],1)],1),[t("el-select",{staticStyle:{marginLeft:"10px"},attrs:{clearable:"",placeholder:"请选择分类",size:"small"},model:{value:e.searchTypeValue,callback:function(t){e.searchTypeValue=t},expression:"searchTypeValue"}},e._l(e.typeOption,(function(e){return t("el-option",{key:e.id,attrs:{label:e.type,value:e.id}})})),1),t("el-button",{staticStyle:{marginLeft:"10px"},attrs:{type:"primary",size:"small"},on:{click:e.searchPic}},[t("i",{staticClass:"el-icon-search",staticStyle:{marginright:"5px"}}),e._v("查询 ")]),t("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"small"},on:{click:e.reset}},[e._v(" 查询所有")])],t("el-table",{staticStyle:{width:"100%",marginTop:"15px"},attrs:{data:e.list,border:!0}},[t("el-table-column",{attrs:{prop:"title",label:"名称",align:"center"}}),t("el-table-column",{attrs:{prop:"imgUrl",label:"压缩图",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{attrs:{src:e.row.imgUrl,width:"100",height:"80"}})]}}])}),t("el-table-column",{attrs:{prop:"type",label:"分类",align:"center",width:"200"}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.removeDataById(a.row,a.$index)}}})]}}])})],1),t("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:e.total,"current-page":e.p.current,"page-size":e.p.number},on:{"current-change":e.handleCurrentChange}})],2)},i=[],r=a("a222"),s={name:"fileDataGainPic",data(){return{AddPictureVisible:!1,dialogVisible:!1,fileData:{title:"",type:""},searchTypeValue:"",dialogImageUrl:"",typeOption:[],list:[],p:{current:1,number:4},total:0,flag:!0}},watch:{searchTypeValue:{deep:!0,handler(e,t){this.p.current=1}}},methods:{async getPicType(){try{let{t:e}=await Object(r["c"])();this.typeOption=e}catch(e){console.log(e)}},async getAllPic(){try{let e=await Object(r["a"])(this.p);console.log(e),this.list=e.t.list,this.total=e.t.total}catch(e){console.log(e)}},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove(e,t){console.log(e,t)},handleChange(e){this.fileData.imgName=e.name},saveOrUpdate(){this.$refs.upload.submit(),this.AddPictureVisible=!1,alert("添加成功"),this.p.current=1,this.getAllPic(),this.$refs.upload.clearFiles(),this.fileData={title:"",type:""},this.dialogImageUrl=""},async searchPic(){if(this.searchTypeValue)try{let e=await Object(r["b"])(this.searchTypeValue,this.p);this.list=e.list,this.total=e.total,this.flag=!1}catch(e){console.log(e)}else alert("请输入查询分类")},reset(){this.searchTypeValue="",this.p.current=1,this.flag=!0,this.getAllPic()},async removeDataById(e,t){try{await Object(r["d"])(e.id,e.imgName),this.p.current=1,this.getAllPic(),alert("删除成功")}catch(a){console.log(a)}},handleCurrentChange(e){this.p.current=e,this.flag?this.getAllPic():this.searchPic()}},mounted(){this.getPicType(),this.getAllPic()}},o=s,n=(a("e85e"),a("2877")),c=Object(n["a"])(o,l,i,!1,null,"c4975f72",null);t["default"]=c.exports},e85e:function(e,t,a){"use strict";a("22b8")}}]);