(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25bbd239"],{"0c1f":function(e,t,s){"use strict";var i=s("b775");const o="http://175.178.83.49:8222/admin/acl/permission";t["a"]={getNestedTreeList(){return Object(i["a"])({url:""+o,method:"get"})},removeById(e){return Object(i["a"])({url:`${o}/remove/${e}`,method:"delete"})},saveLevelOne(e){return Object(i["a"])({url:o+"/save",method:"post",data:e})},update(e){return Object(i["a"])({url:o+"/update",method:"put",data:e})},toAssign(e){return Object(i["a"])({url:`${o}/toAssign/${e}`,method:"get"})},doAssign(e,t){return Object(i["a"])({url:o+"/doAssign",method:"post",params:{roleId:e,permissionId:t}})}}},5393:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-input",{staticStyle:{"margin-bottom":"30px"},attrs:{placeholder:"Filter keyword"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.menuList,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id",border:""}},[t("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",width:"180"}}),t("el-table-column",{attrs:{prop:"path",label:"访问路径",sortable:"",width:"180"}}),t("el-table-column",{attrs:{prop:"component",label:"组件路径",sortable:"",width:"180"}}),t("el-table-column",{attrs:{prop:"permissionValue",label:"权限值"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[1!=s.row.level&&2!=s.row.level||!e.hasPerm("permission.add")?e._e():t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>{e.dialogFormVisible=!0,e.menu.pid=s.row.id}}},[e._v("添加菜单 ")]),3==s.row.level&&e.hasPerm("permission.add")?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>{e.dialogPermissionVisible=!0,e.permission.pid=s.row.id}}},[e._v("添加功能 ")]):e._e(),4==s.row.level&&e.hasPerm("permission.update")?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.updateFunction(s.row)}},[e._v("修改功能 ")]):e._e(),4!=s.row.level&&e.hasPerm("permission.update")?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.getById(s.row)}},[e._v("修改 ")]):e._e(),e.hasPerm("permission.remove")?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.remove(s.row)}},[e._v("删除 ")]):e._e()]}}])})],1),t("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.dialogFormValue},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"menu",attrs:{model:e.menu,rules:e.menuValidateRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[t("el-input",{model:{value:e.menu.name,callback:function(t){e.$set(e.menu,"name",t)},expression:"menu.name"}})],1),t("el-form-item",{attrs:{label:"访问路径",prop:"path"}},[t("el-input",{model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}})],1),t("el-form-item",{attrs:{label:"组件路径",prop:"component"}},[t("el-input",{model:{value:e.menu.component,callback:function(t){e.$set(e.menu,"component",t)},expression:"menu.component"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.restData()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.append()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{visible:e.dialogPermissionVisible,title:"添加功能"},on:{"update:visible":function(t){e.dialogPermissionVisible=t}}},[t("el-form",{ref:"permission",attrs:{model:e.permission,rules:e.permissionValidateRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"功能名称",prop:"name"}},[t("el-input",{model:{value:e.permission.name,callback:function(t){e.$set(e.permission,"name",t)},expression:"permission.name"}})],1),t("el-form-item",{attrs:{label:"访问路径"}},[t("el-input",{model:{value:e.permission.path,callback:function(t){e.$set(e.permission,"path",t)},expression:"permission.path"}})],1),t("el-form-item",{attrs:{label:"组件路径"}},[t("el-input",{model:{value:e.permission.component,callback:function(t){e.$set(e.permission,"component",t)},expression:"permission.component"}})],1),t("el-form-item",{attrs:{label:"功能权限值",prop:"permissionValue"}},[t("el-input",{model:{value:e.permission.permissionValue,callback:function(t){e.$set(e.permission,"permissionValue",t)},expression:"permission.permissionValue"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.restData()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.appendPermission()}}},[e._v("确 定")])],1)],1)],1)},o=[],n=s("0c1f");const r={name:"",pid:0,path:"",component:"",type:"1"},a={permissionValue:"",type:"2",name:"",path:"",component:"",pid:0};var l={data(){return{filterText:"",menuList:[],defaultProps:{children:"children",label:"name"},dialogFormValue:"添加菜单",dialogFormVisible:!1,dialogPermissionVisible:!1,menu:r,permission:a,menuValidateRules:{name:[{required:!0,trigger:"blur",message:"菜单名必须输入"}],path:[{required:!0,trigger:"blur",message:"菜单路径必须输入"}],component:[{required:!0,trigger:"blur",message:"组件名称必须输入"}]},permissionValidateRules:{name:[{required:!0,trigger:"blur",message:"功能名称必须输入"}],permissionValue:[{required:!0,trigger:"blur",message:"功能权限值必须输入"}]}}},watch:{filterText(e){this.$refs.menuTree.filter(e)}},created(){this.fetchNodeList()},methods:{fetchNodeList(){n["a"].getNestedTreeList().then(e=>{!0===e.success&&(this.menuList=e.data.children,console.log(this.menuList))})},filterNode(e,t){return!e||-1!==t.title.toLowerCase().indexOf(e.toLowerCase())},remove(e){console.log(e),this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>n["a"].removeById(e.id)).then(()=>{this.fetchNodeList(),this.$message({type:"success",message:"删除成功!"})}).catch(e=>{"cancel"===e?this.$message({type:"info",message:"已取消删除"}):this.$message({type:"error",message:"删除失败"})})},appendPermission(){this.$refs.permission.validate(e=>{e&&(this.permission.id?this.update(this.permission):n["a"].saveLevelOne(this.permission).then(e=>{this.dialogPermissionVisible=!1,this.$message({type:"success",message:"添加功能成功"}),this.fetchNodeList(),this.menu={...r},this.permission={...a}}))})},appendLevelOne(){n["a"].saveLevelOne(this.menu).then(e=>{this.dialogFormVisible=!1,this.$message({type:"success",message:"添加一级菜单成功"}),this.fetchNodeList(),this.menu={...r},this.permission={...a}}).catch(e=>{this.dialogFormVisible=!1,this.$message({type:"error",message:"添加一级菜单失败"}),this.menu={...r},this.permission={...a}})},append(){this.$refs.menu.validate(e=>{e&&(this.menu.id?this.update(this.menu):0==this.menu.pid?this.appendLevelOne():this.appendLevelTwo())})},update(e){n["a"].update(e).then(e=>{this.dialogFormVisible=!1,this.$message({type:"success",message:"修改成功"}),this.fetchNodeList(),this.restData()})},appendLevelTwo(){n["a"].saveLevelOne(this.menu).then(e=>{this.dialogFormVisible=!1,this.$message({type:"success",message:"添加二级分类成功"}),this.fetchNodeList(),this.menu={...r},this.permission={...a}}).catch(e=>{this.dialogFormVisible=!1,this.$message({type:"error",message:"添加二级分类失败"}),this.menu={...r},this.permission={...a}})},getById(e){this.dialogFormVisible=!0,this.menu=e},updateFunction(e){this.dialogPermissionVisible=!0,this.permission=e},restData(){this.dialogPermissionVisible=!1,this.dialogFormVisible=!1,this.menu={...r},this.permission={...a}}}},m=l,p=s("2877"),u=Object(p["a"])(m,i,o,!1,null,null,null);t["default"]=u.exports}}]);