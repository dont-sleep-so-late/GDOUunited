(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f32c2e"],{"2b41":function(t,e,a){"use strict";a("9e1f"),a("450d");var l=a("6ed5"),i=a.n(l),r=(a("0fb7"),a("f529")),s=a.n(r),c=(a("d9e2"),a("bc3a")),o=a.n(c),n=a("4360"),p=a("5f87");const u=o.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_API,timeout:5e4});u.interceptors.request.use(t=>(n["a"].getters.token&&(t.headers["token"]=Object(p["a"])()),t),t=>(console.log(t),Promise.reject(t))),u.interceptors.response.use(t=>{const e=t.data;return 200===e.state||null===e.mess||"查询成功"===e.mess||"查询所有文章成功"===e.mess||"添加文章成功"===e.mess||"删除文章成功"===e.mess||"修改文章成功"===e.mess||"展示科技成功图片成功"===e.mess||"string"===e.mess?e:2e4!==e.code?(s()({message:e.message||"Error",type:"error",duration:5e3}),50008!==e.code&&50012!==e.code&&50014!==e.code||i.a.confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then(()=>{n["a"].dispatch("user/resetToken").then(()=>{location.reload()})}),Promise.reject(new Error(e.message||"Error"))):e},t=>(console.log("err"+t),s()({message:t.message,type:"error",duration:5e3}),Promise.reject(t))),e["a"]=u},"35ef":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"e",(function(){return o})),a.d(e,"g",(function(){return n})),a.d(e,"d",(function(){return p}));var l=a("2b41");const i=()=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/queryArticleType",method:"post"}),r=t=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/queryAllArticles",method:"get",params:{page:t.current,size:t.number}}),s=t=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/addArticle",method:"post",params:{author:t.articleAuth,title:t.articleTitle,content:t.content,type:t.typeValue}}),c=(t,e)=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/queryArticleByType",method:"post",params:{typeId:t,page:1,size:6}}),o=t=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/deleteArticleById",method:"post",params:{id:t}}),n=(t,e)=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/updateArticle",method:"post",params:{id:t,author:e.articleAuth,title:e.articleTitle,content:e.content,type:e.typeValue}}),p=t=>Object(l["a"])({url:"http://175.178.83.49:9108/servicefile/scientificAchievementOfArticle/queryArticleById",params:{id:t},method:"post"})},4267:function(t,e,a){},7724:function(t,e,a){"use strict";a("4267")},fab5:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t._self._c;return e("div",[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("发布")]),e("el-dialog",{attrs:{title:"发布文章",visible:t.dialogFormVisible,"show-close":!1,width:"1200px",top:"3vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("h2",{staticStyle:{textAlign:"center"}},[t._v("文章发布")]),e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[e("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章标题"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章标题"},model:{value:t.uploadData.articleTitle,callback:function(e){t.$set(t.uploadData,"articleTitle",e)},expression:"uploadData.articleTitle"}})],1),e("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"200px"},attrs:{label:"文章类型"}},[e("el-select",{staticStyle:{marginLeft:"20px"},attrs:{clearable:"",placeholder:"请选择文章所属类型"},model:{value:t.uploadData.typeValue,callback:function(e){t.$set(t.uploadData,"typeValue",e)},expression:"uploadData.typeValue"}},t._l(t.uploadTypeOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.type,value:t.id}})})),1)],1),e("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章作者"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章作者"},model:{value:t.uploadData.articleAuth,callback:function(e){t.$set(t.uploadData,"articleAuth",e)},expression:"uploadData.articleAuth"}})],1),e("el-form-item",{attrs:{label:"文章内容"}},[e("quill-editor",{ref:"myQuillEditor",model:{value:t.uploadData.content,callback:function(e){t.$set(t.uploadData,"content",e)},expression:"uploadData.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.dialogVisible}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveAdd}},[t._v("确 定")])],1)],1),[e("el-select",{staticStyle:{marginLeft:"10px"},attrs:{clearable:"",placeholder:"请选择分类",size:"small"},model:{value:t.searchTypeValue,callback:function(e){t.searchTypeValue=e},expression:"searchTypeValue"}},t._l(t.uploadTypeOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.type,value:t.id}})})),1),e("el-button",{staticStyle:{marginLeft:"10px"},attrs:{type:"primary",size:"small"},on:{click:t.searchArticl}},[e("i",{staticClass:"el-icon-search",staticStyle:{marginright:"5px"}}),t._v("查询 ")]),e("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"small"},on:{click:t.reset}},[t._v(" 查询所有")])],e("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"small"},on:{click:t.updataNumberFormVisible}},[t._v("修改")]),e("el-dialog",{attrs:{title:"修改文章",visible:t.updataFormVisible,"show-close":!1,width:"1200px",top:"3vh"},on:{"update:visible":function(e){t.updataFormVisible=e}}},[e("h2",{staticStyle:{textAlign:"center"}},[t._v("修改文章")]),e("el-form",{ref:"updataArtForm",staticClass:"demo-form-inline",attrs:{inline:!0}},[e("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章标题"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章标题"},model:{value:t.updataData.articleTitle,callback:function(e){t.$set(t.updataData,"articleTitle",e)},expression:"updataData.articleTitle"}})],1),e("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"200px"},attrs:{label:"文章类型"}},[e("el-select",{staticStyle:{marginLeft:"20px"},attrs:{clearable:"",placeholder:"请选择所属类型"},model:{value:t.updataData.typeValue,callback:function(e){t.$set(t.updataData,"typeValue",e)},expression:"updataData.typeValue"}},t._l(t.updataTypeOption,(function(t){return e("el-option",{key:t.id,attrs:{label:t.type,value:t.id}})})),1)],1),e("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章作者"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章作者"},model:{value:t.updataData.articleAuth,callback:function(e){t.$set(t.updataData,"articleAuth",e)},expression:"updataData.articleAuth"}})],1),e("el-form-item",{attrs:{label:"文章内容"}},[e("quill-editor",{ref:"myQuillEditor",model:{value:t.updataData.content,callback:function(e){t.$set(t.updataData,"content",e)},expression:"updataData.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.updataVisible}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveUpdata}},[t._v("确 定")])],1)],1),e("el-button",{staticStyle:{marginLeft:"10px"},attrs:{type:"danger",size:"small"},on:{click:t.removeArt}},[t._v("删除")]),e("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,border:!0,total:t.total},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{label:"勾选",width:"55px",type:"selection",align:"center"}}),e("el-table-column",{attrs:{prop:"title",label:"文章名称",align:"center"}}),e("el-table-column",{attrs:{prop:"type",label:"文章分类",align:"center"}}),e("el-table-column",{attrs:{prop:"updateTime",label:"添加日期",width:"200px",align:"center"}})],1),e("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:t.total,"current-page":t.p.current,"page-size":t.p.number},on:{"current-change":t.handleCurrentChange}})],2)},i=[],r=(a("14d9"),a("35ef")),s={name:"fileDataGainArt",data(){return{dialogFormVisible:!1,updataFormVisible:!1,uploadData:{articleTitle:"",articleAuth:"",typeValue:"",content:""},updataData:{articleTitle:"",articleAuth:"",typeValue:"",content:""},uploadTypeOption:[],searchTypeValue:"",list:[],total:0,p:{current:1,number:6},flag:!0}},computed:{id(){return this.$store.state.gainArt.id},updataTypeOption(){return this.uploadTypeOption}},watch:{searchTypeValue:{deep:!0,handler(t,e){this.p.current=1}}},methods:{async searchArticl(){if(this.searchTypeValue)try{let t=await Object(r["f"])(this.searchTypeValue,this.p);this.total=t.t.total,this.list=t.t.list,this.flag=!1}catch(t){console.log("error.message")}else alert("请选择查询分类")},reset(){this.searchTypeValue="",this.p.current=1,this.flag=!0,this.getAllArt()},async saveAdd(){try{if(this.uploadData.articleTitle.trim()&&this.uploadData.typeValue&&this.uploadData.articleAuth.trim()&&this.uploadData.content){await Object(r["a"])(this.uploadData);this.searchTypeValue="",this.flag=!0,alert("发布成功"),this.getAllArt(),this.dialogVisible()}else alert("请输入完整信息")}catch(t){alert("发布失败")}},async saveUpdata(){try{if(this.updataData.articleTitle.trim()&&this.updataData.typeValue&&this.updataData.articleAuth.trim()&&this.updataData.content){console.log();await Object(r["g"])(this.id[0],this.updataData);this.searchTypeValue="",this.p.current=1,this.flag=!0,alert("修改成功"),this.getAllArt(),this.updataVisible()}else alert("请输入完整内容")}catch(t){alert("修改文章失败",t.message)}},dialogVisible(){this.uploadData.articleTitle="",this.uploadData.typeValue="",this.uploadData.content="",this.uploadData.articleAuth="",this.dialogFormVisible=!1},updataVisible(){this.updataData.articleTitle="",this.updataData.typeValue="",this.updataData.content="",this.updataData.articleAuth="",this.updataFormVisible=!1},async updataNumberFormVisible(){if(0===this.id.length)alert("请勾选修改的内容");else if(1===this.id.length){const t=await Object(r["d"])(this.id[0]);this.updataData.articleAuth=t.t.author,this.updataData.articleTitle=t.t.title,this.updataData.typeValue=t.t.type,this.updataData.content=t.t.content,this.updataFormVisible=!0}else this.id.length>1&&alert("至多修改一篇文章")},async removeArt(){if(0!==this.id.length)try{for(let t=0;t<this.id.length;t++){await Object(r["e"])(this.id[t])}this.searchTypeValue="",this.p.current=1,this.flag=!0,alert("删除成功"),this.getAllArt()}catch(t){alert(t.message)}else alert("未选择任何项")},handleSelectionChange(t){let e=[];t.forEach(t=>{e.push(t.id)}),this.$store.dispatch("gainArt/SelectionChange",e)},handleCurrentChange(t){this.p.current=t,this.flag?this.getAllArt():this.getArticleType()},async getArticleType(){try{let t=await Object(r["c"])();this.uploadTypeOption=t.t}catch(t){console.log(t)}},async getAllArt(){try{let t=await Object(r["b"])(this.p);this.list=t.t.list,this.total=t.t.total}catch(t){console.log(t)}}},mounted(){this.getArticleType(),this.getAllArt()}},c=s,o=(a("7724"),a("2877")),n=Object(o["a"])(c,l,i,!1,null,"15192c8e",null);e["default"]=n.exports}}]);