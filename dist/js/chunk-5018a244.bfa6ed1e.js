(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5018a244"],{"0c1f":function(e,t,s){"use strict";var o=s("b775");const a="http://175.178.83.49:8222/admin/acl/permission";t["a"]={getNestedTreeList(){return Object(o["a"])({url:""+a,method:"get"})},removeById(e){return Object(o["a"])({url:`${a}/remove/${e}`,method:"delete"})},saveLevelOne(e){return Object(o["a"])({url:a+"/save",method:"post",data:e})},update(e){return Object(o["a"])({url:a+"/update",method:"put",data:e})},toAssign(e){return Object(o["a"])({url:`${a}/toAssign/${e}`,method:"get"})},doAssign(e,t){return Object(o["a"])({url:a+"/doAssign",method:"post",params:{roleId:e,permissionId:t}})}}},"56b4":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{margin:"20px 20px"}},[t("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),t("el-button",{attrs:{disabled:e.saveBtnDisabled,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)},a=[],r=(s("14d9"),s("0c1f")),i={data(){return{saveBtnDisabled:!1,data:[],defaultProps:{children:"children",label:"name"},roleId:""}},watch:{$route(e,t){console.log("路由变化......"),console.log(e),console.log(t),this.init()}},created(){this.init()},methods:{init(){this.$route.params&&this.$route.params.id&&(this.roleId=this.$route.params.id,this.fetchDataById(this.roleId),console.log("roleId:",this.roleId))},fetchDataById(e){r["a"].toAssign(e).then(e=>{this.data=e.data.children,console.log("data:",this.data);var t=JSON.parse(JSON.stringify(this.data));console.log("joinList:",t[0]["children"]);var s=[];this.getJsonToList(s,t[0]["children"]),console.log("最终集合"),console.log(s),this.setCheckedKeys(s)})},getJsonToList(e,t){for(var s=0;s<t.length;s++)1==t[s]["select"]&&e.push(t[s]["id"]),null!=t[s]["children"]&&this.getJsonToList(e,t[s]["children"])},getCheckedNodes(){console.log(this.$refs.tree.getCheckedNodes())},getCheckedKeys(){console.log(this.$refs.tree.getCheckedKeys())},setCheckedKeys(e){this.$refs.tree.setCheckedKeys(e)},save(){this.saveBtnDisabled=!0;var e=this.$refs.tree.getCheckedKeys().join(",");r["a"].doAssign(this.roleId,e).then(e=>{e.success&&(this.$message({type:"success",message:"保存成功"}),this.$router.push({path:"/workplace/role/list"}))})}}},d=i,l=s("2877"),n=Object(l["a"])(d,o,a,!1,null,null,null);t["default"]=n.exports}}]);