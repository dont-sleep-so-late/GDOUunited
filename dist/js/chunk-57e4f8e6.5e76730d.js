(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57e4f8e6"],{"13b3":function(t,a,e){},"2a2e":function(t,a,e){"use strict";e("13b3")},3886:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"a",(function(){return r})),e.d(a,"d",(function(){return s})),e.d(a,"c",(function(){return u})),e.d(a,"f",(function(){return o})),e.d(a,"e",(function(){return p}));var l=e("85fe");const i=t=>{let{current:a,number:e}=t;return Object(l["a"])({url:"http://175.178.83.49:9102/servicearticle/article/article/selectByPage",params:{current:a,number:e},method:"post"})},r=t=>Object(l["a"])({url:"http://175.178.83.49:9102/servicearticle/article/article/addArticle",data:t,method:"post"}),s=t=>Object(l["a"])({url:"http://175.178.83.49:9102/servicearticle/article/article/deleteArticleById",params:{id:t},method:"post"}),u=t=>Object(l["a"])({url:"http://175.178.83.49:9102/servicearticle/article/article/queryArticleById",params:{id:t},method:"post"}),o=t=>Object(l["a"])({url:"http://175.178.83.49:9102/servicearticle/article/article/updateArticle",data:t,method:"post"}),p=(t,a)=>Object(l["a"])({url:"http://175.178.83.49:9102/servicearticle/article/article/queryArticleByType",params:{type:t.searchValue,current:a.current,number:a.number},method:"get"})},"91e8":function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t._self._c;return a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.dialogFormVisible=!0}}},[t._v("发布")]),a("el-dialog",{attrs:{title:"发布文章",visible:t.dialogFormVisible,"show-close":!1,width:"1200px",top:"3vh"},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[a("h2",{staticStyle:{textAlign:"center"}},[t._v("文章发布")]),a("el-form",{ref:"addArtForm",staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章标题"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章标题"},model:{value:t.uploadData.articleTitle,callback:function(a){t.$set(t.uploadData,"articleTitle",a)},expression:"uploadData.articleTitle"}})],1),a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"200px"},attrs:{label:"文章类型"}},[a("el-select",{staticStyle:{marginLeft:"20px"},attrs:{clearable:"",placeholder:"请选择所属类型"},model:{value:t.uploadData.typeValue,callback:function(a){t.$set(t.uploadData,"typeValue",a)},expression:"uploadData.typeValue"}},t._l(t.typeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章作者"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章作者"},model:{value:t.uploadData.articleAuth,callback:function(a){t.$set(t.uploadData,"articleAuth",a)},expression:"uploadData.articleAuth"}})],1),a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"200px"},attrs:{label:"文章位置"}},[a("el-select",{staticStyle:{marginLeft:"20px"},attrs:{clearable:"",placeholder:"请选择文章发布的位置"},model:{value:t.uploadData.pubValue,callback:function(a){t.$set(t.uploadData,"pubValue",a)},expression:"uploadData.pubValue"}},t._l(t.pubOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"文章内容"}},[a("quill-editor",{ref:"myQuillEditor",model:{value:t.uploadData.content,callback:function(a){t.$set(t.uploadData,"content",a)},expression:"uploadData.content"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogVisible}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.saveAdd()}}},[t._v("确 定")])],1)],1),[a("el-select",{staticStyle:{marginLeft:"10px"},attrs:{clearable:"",placeholder:"请选择分类",size:"small"},model:{value:t.showTable.searchValue,callback:function(a){t.$set(t.showTable,"searchValue",a)},expression:"showTable.searchValue"}},t._l(t.typeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{staticStyle:{marginLeft:"10px"},attrs:{type:"primary",size:"small"},on:{click:t.searchArticl}},[a("i",{staticClass:"el-icon-search",staticStyle:{marginright:"5px"}}),t._v("查询 ")]),a("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"small"},on:{click:t.reset}},[t._v(" 查询所有")])],a("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"small"},on:{click:t.updataNumberFormVisible}},[t._v("修改")]),a("el-dialog",{attrs:{title:"修改文章",visible:t.updataFormVisible,"show-close":!1,width:"1200px",top:"3vh"},on:{"update:visible":function(a){t.updataFormVisible=a}}},[a("h2",{staticStyle:{textAlign:"center"}},[t._v("修改文章")]),a("el-form",{ref:"updataArtForm",staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章标题"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章标题"},model:{value:t.updataData.articleTitle,callback:function(a){t.$set(t.updataData,"articleTitle",a)},expression:"updataData.articleTitle"}})],1),a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"200px"},attrs:{label:"文章类型"}},[a("el-select",{staticStyle:{marginLeft:"20px"},attrs:{clearable:"",placeholder:"请选择所属类型"},model:{value:t.updataData.typeValue,callback:function(a){t.$set(t.updataData,"typeValue",a)},expression:"updataData.typeValue"}},t._l(t.updataTypeOption,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"120px"},attrs:{label:"文章作者"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入文章标题"},model:{value:t.updataData.articleAuth,callback:function(a){t.$set(t.updataData,"articleAuth",a)},expression:"updataData.articleAuth"}})],1),a("el-form-item",{staticStyle:{marginTop:"10px",marginLeft:"200px"},attrs:{label:"文章位置"}},[a("el-select",{staticStyle:{marginLeft:"20px"},attrs:{clearable:"",placeholder:"请选择文章发布的位置"},model:{value:t.updataData.pubValue,callback:function(a){t.$set(t.updataData,"pubValue",a)},expression:"updataData.pubValue"}},t._l(t.updataPubOption,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"文章内容"}},[a("quill-editor",{ref:"myQuillEditor",model:{value:t.updataData.content,callback:function(a){t.$set(t.updataData,"content",a)},expression:"updataData.content"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.updataVisible}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.saveUpdata()}}},[t._v("确 定")])],1)],1),a("el-button",{staticStyle:{marginLeft:"10px"},attrs:{type:"danger",size:"small"},on:{click:t.removeArt}},[t._v("删除")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,border:!0,total:t.total},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"勾选",width:"55px",type:"selection",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"文章名称",align:"center"}}),a("el-table-column",{attrs:{prop:"type",label:"所属党派",align:"center"}}),a("el-table-column",{attrs:{prop:"position",label:"位置",align:"center"}}),a("el-table-column",{attrs:{prop:"releaseTime",label:"添加日期",width:"200px",align:"center"}})],1),a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:t.total,"current-page":t.p.current,"page-size":t.p.number},on:{"current-change":t.handleCurrentChange}})],2)},i=[],r=(e("14d9"),e("3886")),s={name:"politics",data(){return{typeOptions:[{value:"通知公告",label:"通知公告"},{value:"统战动态",label:"统战动态"},{value:"党派园地",label:"党派园地"},{value:"民革",label:"民革"},{value:"民盟",label:"民盟"},{value:"民建",label:"民建"},{value:"民进",label:"民进"},{value:"农工",label:"农工"},{value:"致公",label:"致公"},{value:"九三",label:"九三"},{value:"非党派",label:"非党派"},{value:"人大代表",label:"人大代表"},{value:"政协委员",label:"政协委员"},{value:"其他党派人士",label:"其他党派人士"}],pubOptions:[{value:"首页",label:"首页"},{value:"民主党派",label:"民主党派"},{value:"无党派人士",label:"无党派人士"},{value:"参政议政",label:"参政议政"}],list:[],dialogFormVisible:!1,updataFormVisible:!1,showTable:{searchValue:""},uploadData:{articleTitle:"",articleAuth:"",typeValue:"",pubValue:"",content:""},updataData:{id:"",articleTitle:"",articleAuth:"",typeValue:"",pubValue:"",content:""},p:{current:1,number:6},total:0,flag:!0}},computed:{pid(){return this.$store.state.politics.pid},updataTypeOption(){return this.typeOptions},updataPubOption(){return this.pubOptions}},watch:{showTable:{deep:!0,handler(t,a){this.p.current=1}}},methods:{async getArticeleData(){try{let t=await Object(r["b"])(this.p);this.list=t.Article,this.total=t.totalNum}catch(t){}},handleCurrentChange(t){this.p.current=t,this.flag?this.getArticeleData():this.searchArticl()},handleSelectionChange(t){let a=[];t.forEach(t=>{a.push(t.id)}),this.$store.dispatch("politics/SelectionChange",a)},async updataNumberFormVisible(){if(0===this.pid.length)alert("请勾选修改的内容");else if(1===this.pid.length){const t=await Object(r["c"])(this.pid[0]);this.updataData.articleAuth=t.author,this.updataData.articleTitle=t.title,this.updataData.typeValue=t.type,this.updataData.pubValue=t.position,this.updataData.content=t.content,this.updataFormVisible=!0}else this.pid.length>1&&alert("至多修改一篇文章")},async saveUpdata(){try{if(this.updataData.articleTitle.trim()&&this.updataData.typeValue&&this.updataData.pubValue&&this.updataData.articleAuth.trim()&&this.updataData.content){const t=new FormData;this.updataData.id=this.pid[0],t.append("id",this.updataData.id),t.append("title",this.updataData.articleTitle),t.append("type",this.updataData.typeValue),t.append("position",this.updataData.pubValue),t.append("content",this.updataData.content),t.append("author",this.updataData.articleAuth);await Object(r["f"])(t);this.showTable.searchValue="",this.p.current=1,this.flag=!0,alert("修改成功"),this.getArticeleData(),this.updataVisible()}else alert("请输入完整内容")}catch(t){alert("修改文章失败",t.message)}},async removeArt(){if(0!==this.pid.length)try{for(let t=0;t<this.pid.length;t++){await Object(r["d"])(this.pid[t])}this.showTable.searchValue="",this.p.current=1,this.flag=!0,alert("删除成功"),this.getArticeleData()}catch(t){alert(t.message)}else alert("未选择任何项")},async searchArticl(){if(this.showTable.searchValue)try{let t=await Object(r["e"])(this.showTable,this.p);console.log(t),this.total=t.totalNum,this.list=t.Article,this.flag=!1}catch(t){console.log("error.message")}else alert("请选择查询分类")},reset(){this.showTable.searchValue="",this.p.current=1,this.flag=!0,this.getArticeleData()},async saveAdd(){try{if(this.uploadData.articleTitle.trim()&&this.uploadData.typeValue&&this.uploadData.pubValue&&this.uploadData.articleAuth.trim()&&this.uploadData.content){const t=new FormData;t.append("title",this.uploadData.articleTitle),t.append("type",this.uploadData.typeValue),t.append("position",this.uploadData.pubValue),t.append("content",this.uploadData.content),t.append("author",this.uploadData.articleAuth);await Object(r["a"])(t);this.showTable.searchValue="",this.flag=!0,alert("发布成功"),this.getArticeleData(),this.dialogVisible()}else alert("请输入完整信息")}catch(t){alert("发布失败")}},dialogVisible(){this.uploadData.articleTitle="",this.uploadData.typeValue="",this.uploadData.pubValue="",this.uploadData.content="",this.uploadData.articleAuth="",this.dialogFormVisible=!1},updataVisible(){this.updataData.articleTitle="",this.updataData.typeValue="",this.updataData.pubValue="",this.updataData.content="",this.updataData.articleAuth="",this.updataFormVisible=!1}},created(){this.getArticeleData()}},u=s,o=(e("2a2e"),e("2877")),p=Object(o["a"])(u,l,i,!1,null,"ece9c476",null);a["default"]=p.exports}}]);