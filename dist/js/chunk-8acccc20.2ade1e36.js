(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8acccc20"],{"2e3d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"button-row"},[t("el-button",{on:{click:function(t){return e.updatedata()}}},[e._v("修改")]),t("el-button",{attrs:{type:"danger"},on:{click:e.removeSome}},[e._v("删除")])],1),t("div",{staticClass:"search-row"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"成员名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchSome()}},model:{value:e.searchMsg.name,callback:function(t){e.$set(e.searchMsg,"name",t)},expression:"searchMsg.name"}})],1),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchSome()}}},[e._v("查询")])],1)],1),t("div",{staticClass:"table-row"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"row-key":e.getRowKey,data:e.list,"tooltip-effect":"dark",border:!0},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center","reserve-selection":!0}}),t("el-table-column",{attrs:{type:"index",index:e.indexAdd,label:"序号",width:"160"}}),t("el-table-column",{attrs:{prop:"department",label:"学院单位",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"主要负责人",width:"180"}}),t("el-table-column",{attrs:{prop:"phone",label:"联系方式",width:"200"}}),t("el-table-column",{attrs:{prop:"nativePlace",label:"地址",width:"200"}}),t("el-table-column",{attrs:{prop:"o_identity",label:"所属组织身份",width:"width"}}),t("el-table-column",{attrs:{prop:"joinPartyDate",label:"参加党派时间",width:"width"}})],1),t("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.page,"page-sizes":[3,5,8],"page-size":e.limit,layout:"  prev, pager, next, jumper,->,sizes,total",total:this.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),t("el-dialog",{attrs:{title:"修改信息",visible:e.dialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{staticStyle:{width:"100%"},attrs:{inline:!0},model:{value:e.modifyForm,callback:function(t){e.modifyForm=t},expression:"modifyForm"}},[t("el-form-item",{attrs:{label:"党派类型:","label-width":"120px"}},[t("el-select",{attrs:{autocomplete:"off",placeholder:"请选择党派类型"},model:{value:e.modifyForm.partyId,callback:function(t){e.$set(e.modifyForm,"partyId",t)},expression:"modifyForm.partyId"}},e._l(e.dangpai,(function(e){return t("el-option",{key:e.meta.id,attrs:{value:e.meta.id,label:e.meta.title}})})),1)],1),t("el-form-item",{attrs:{label:"学院部门:","label-width":"120px"}},[t("el-select",{attrs:{autocomplete:"off",placeholder:"请选择学院部门"},model:{value:e.modifyForm.departmentId,callback:function(t){e.$set(e.modifyForm,"departmentId",t)},expression:"modifyForm.departmentId"}},[e._l(e.xueyuan,(function(e){return t("el-option",{key:e.meta.id,attrs:{value:e.meta.id,label:e.meta.title}})})),e._l(e.zuzhi,(function(e){return t("el-option",{key:e.meta.id,attrs:{value:e.meta.id,label:e.meta.title}})}))],2)],1),t("el-form-item",{attrs:{label:"组织身份:","label-width":"120px"}},[t("el-select",{attrs:{autocomplete:"off",placeholder:"请选择党派类型"},model:{value:e.modifyForm.organizationId,callback:function(t){e.$set(e.modifyForm,"organizationId",t)},expression:"modifyForm.organizationId"}},[t("el-option",{attrs:{value:"6948307500875666111",label:"管理员"}}),t("el-option",{attrs:{value:"6948307500875666112",label:"普通成员"}})],1)],1),t("el-form-item",{attrs:{label:"主要负责人:","label-width":"120px"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请填入姓名"},model:{value:e.modifyForm.name,callback:function(t){e.$set(e.modifyForm,"name",t)},expression:"modifyForm.name"}})],1),t("el-form-item",{attrs:{label:"联系方式:","label-width":"120px"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请填写手机号"},model:{value:e.modifyForm.phone,callback:function(t){e.$set(e.modifyForm,"phone",t)},expression:"modifyForm.phone"}})],1),t("el-form-item",{attrs:{label:"地址:","label-width":"120px"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请填写常住地址"},model:{value:e.modifyForm.nativePlace,callback:function(t){e.$set(e.modifyForm,"nativePlace",t)},expression:"modifyForm.nativePlace"}})],1),t("el-form-item",{attrs:{label:"参加党派时间:","label-width":"120px"}},[t("el-date-picker",{attrs:{type:"month",placeholder:"选择年月","value-format":"yyyy-MM"},model:{value:e.modifyForm.joinPartyDate,callback:function(t){e.$set(e.modifyForm,"joinPartyDate",t)},expression:"modifyForm.joinPartyDate"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.dialogVisible()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addData(e.modifyForm)}}},[e._v("确 定")])],1)],1)],1)},o=[],l=(a("14d9"),a("bc3a")),n=a.n(l),r=a("635d"),s={name:"Quntuanzuzhi",data(){return{multipleSelection:[],party:localStorage.getItem("group"),page:1,limit:5,total:0,searchMsg:{name:""},list:[],removeMsg:[],dialogFormVisible:!1,modifyForm:{partyId:"",name:"",phone:"",nativePlace:"",joinPartyDate:"",departmentId:"",organizationId:""},xueyuan:[],dangpai:[],zuzhi:[]}},methods:{indexAdd(e){return e+1+(this.page-1)*this.limit},getRowKey(e){return e.id},getMenuList(){Object(r["callAllMenu"])().then(e=>{let t=e;this.xueyuan=t.res1.data.router.children,this.dangpai=t.res2.data.router.children,this.zuzhi=t.res3.data.router.children})},async getPageList(){const{party:e,page:t,limit:a}=this;n.a.get(`http://175.178.83.49:9109/Organization/RenWu/Party/${e}/${t}/${a}`).then(e=>{this.list=e.data.data.info,this.total=e.data.data.total})},handleCurrentChange(e){this.page=e,""==this.searchMsg.name?this.getPageList():this.searchSome()},handleSizeChange:function(e){this.limit=e,this.page=1,""==this.searchMsg.name?this.getPageList():this.searchSome()},updatedata(){0===this.multipleSelection.length?alert("请勾选修改的内容"):1===this.multipleSelection.length?(this.getMenuList(),this.dialogFormVisible=!0,this.modifyForm={partyId:"",name:this.multipleSelection[0].name,phone:this.multipleSelection[0].phone,nativePlace:this.multipleSelection[0].nativePlace,joinPartyDate:this.multipleSelection[0].joinPartyDate,departmentId:"",organizationId:""}):this.multipleSelection.length>1&&alert("至多修改一为成员信息")},dialogVisible(){this.dialogFormVisible=!1,this.modifyForm={partyId:"",name:"",phone:"",nativePlace:"",joinPartyDate:"",departmentId:"",organizationId:""}},addData(){if(this.modifyForm.partyId&&this.modifyForm.name.trim()&&this.modifyForm.phone&&this.modifyForm.nativePlace.trim()&&this.modifyForm.joinPartyDate&&this.modifyForm.departmentId&&this.modifyForm.organizationId){var e=this.multipleSelection[0].id,t=this.modifyForm.name,a=this.modifyForm.phone,i=this.modifyForm.nativePlace,o=this.modifyForm.joinPartyDate,l=this.modifyForm.departmentId,r=this.modifyForm.organizationId,s=this.modifyForm.partyId;n.a.post("http://175.178.83.49:9109/Organization/RenWu/update",{id:e,name:t,phone:a,nativePlace:i,joinPartyDate:o,departmentId:l,organizationId:r,partyId:s}).then(e=>{this.getPageList(),this.$message({message:"用户信息修改成功！！！",type:"success"})}),this.dialogVisible()}else alert("请输入完整信息")},searchSome(){const{party:e,page:t,limit:a}=this;n.a.get(`http://175.178.83.49:9109/Organization/RenWu/Party/${e}/${this.searchMsg.name}/${t}/${a}`).then(e=>{this.total=e.data.data.total,this.list=e.data.data.info})},handleSelectionChange(e){this.multipleSelection=e,console.log(this.multipleSelection)},removeSome(){for(let e=0;e<this.multipleSelection.length;e++)this.removeMsg.push(this.multipleSelection[e].id),n.a.get("http://175.178.83.49:9109/Organization/RenWu/delete/"+this.removeMsg[e]).then(e=>{this.getPageList(),this.$message({message:"用户删除成功！！！",type:"success"})})}},mounted(){this.getPageList()},created(){this.department=localStorage.getItem("party")}},m=s,d=(a("8778"),a("2877")),c=Object(d["a"])(m,i,o,!1,null,null,null);t["default"]=c.exports},8778:function(e,t,a){"use strict";a("9edc")},"9edc":function(e,t,a){}}]);