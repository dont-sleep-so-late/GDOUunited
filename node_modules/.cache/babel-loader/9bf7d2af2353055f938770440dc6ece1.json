{"remainingRequest":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\src\\pages\\workplace\\menu\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\src\\pages\\workplace\\menu\\list.vue","mtime":1664118576000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\babel.config.js","mtime":1710918909587},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710918915895},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\babel-loader\\lib\\index.js","mtime":1710918914227},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710918915895},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\vue-loader\\lib\\index.js","mtime":1710918931244}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1lbnUgZnJvbSAnQC9hcGkvYWNsL21lbnUnOwpjb25zdCBtZW51Rm9ybSA9IHsKICBuYW1lOiAnJywKICBwaWQ6IDAsCiAgcGF0aDogJycsCiAgY29tcG9uZW50OiAnJywKICB0eXBlOiAnMScKfTsKY29uc3QgcGVyRm9ybSA9IHsKICBwZXJtaXNzaW9uVmFsdWU6ICcnLAogIHR5cGU6ICcyJywKICBuYW1lOiAnJywKICBwYXRoOiAnJywKICBjb21wb25lbnQ6ICcnLAogIHBpZDogMAp9OwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbHRlclRleHQ6ICcnLAogICAgICBtZW51TGlzdDogW10sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgfSwKICAgICAgZGlhbG9nRm9ybVZhbHVlOiAn5re75Yqg6I+c5Y2VJywKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dQZXJtaXNzaW9uVmlzaWJsZTogZmFsc2UsCiAgICAgIG1lbnU6IG1lbnVGb3JtLAogICAgICBwZXJtaXNzaW9uOiBwZXJGb3JtLAogICAgICBtZW51VmFsaWRhdGVSdWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIG1lc3NhZ2U6ICfoj5zljZXlkI3lv4XpobvovpPlhaUnCiAgICAgICAgfV0sCiAgICAgICAgcGF0aDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ+iPnOWNlei3r+W+hOW/hemhu+i+k+WFpScKICAgICAgICB9XSwKICAgICAgICBjb21wb25lbnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIG1lc3NhZ2U6ICfnu4Tku7blkI3np7Dlv4XpobvovpPlhaUnCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgcGVybWlzc2lvblZhbGlkYXRlUnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn5Yqf6IO95ZCN56ew5b+F6aG76L6T5YWlJwogICAgICAgIH1dLAogICAgICAgIHBlcm1pc3Npb25WYWx1ZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgbWVzc2FnZTogJ+WKn+iDveadg+mZkOWAvOW/hemhu+i+k+WFpScKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgLy8g55uR5ZCs5LiK6Z2i5paH5pys5qGG5pCc57SiCiAgd2F0Y2g6IHsKICAgIGZpbHRlclRleHQodmFsKSB7CiAgICAgIHRoaXMuJHJlZnMubWVudVRyZWUuZmlsdGVyKHZhbCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaE5vZGVMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaE5vZGVMaXN0KCkgewogICAgICBtZW51LmdldE5lc3RlZFRyZWVMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgPT09IHRydWUpIHsKICAgICAgICAgIHRoaXMubWVudUxpc3QgPSByZXNwb25zZS5kYXRhLmNoaWxkcmVuOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5tZW51TGlzdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUudG9Mb3dlckNhc2UoKSkgIT09IC0xOwogICAgfSwKICAgIHJlbW92ZShkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XorrDlvZUsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgcmV0dXJuIG1lbnUucmVtb3ZlQnlJZChkYXRhLmlkKTsKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5mZXRjaE5vZGVMaXN0KCk7IC8vIOWIt+aWsOWIl+ihqAogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKHJlc3BvbnNlID0+IHsKICAgICAgICAvLyDlpLHotKUKICAgICAgICBpZiAocmVzcG9uc2UgPT09ICdjYW5jZWwnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5aSx6LSlJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhcHBlbmRQZXJtaXNzaW9uKCkgewogICAgICB0aGlzLiRyZWZzLnBlcm1pc3Npb24udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMucGVybWlzc2lvbi5pZCkgewogICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBlcm1pc3Npb24pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWVudS5zYXZlTGV2ZWxPbmUodGhpcy5wZXJtaXNzaW9uKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Blcm1pc3Npb25WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5Yqf6IO95oiQ5YqfJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8vIOWIt+aWsOmhtemdogogICAgICAgICAgICAgIHRoaXMuZmV0Y2hOb2RlTGlzdCgpOwogICAgICAgICAgICAgIHRoaXMubWVudSA9IHsKICAgICAgICAgICAgICAgIC4uLm1lbnVGb3JtCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB7CiAgICAgICAgICAgICAgICAuLi5wZXJGb3JtCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhcHBlbmRMZXZlbE9uZSgpIHsKICAgICAgbWVudS5zYXZlTGV2ZWxPbmUodGhpcy5tZW51KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5LiA57qn6I+c5Y2V5oiQ5YqfJwogICAgICAgIH0pOwogICAgICAgIC8vIOWIt+aWsOmhtemdogogICAgICAgIHRoaXMuZmV0Y2hOb2RlTGlzdCgpOwogICAgICAgIHRoaXMubWVudSA9IHsKICAgICAgICAgIC4uLm1lbnVGb3JtCiAgICAgICAgfTsKICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB7CiAgICAgICAgICAuLi5wZXJGb3JtCiAgICAgICAgfTsKICAgICAgfSkuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICAgIC8vIOS9oOS7rOWGme+8muWIpOaWreeCueWHu+WPlua2iOa4heepuuS4gOS4iwogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5LiA57qn6I+c5Y2V5aSx6LSlJwogICAgICAgIH0pOwogICAgICAgIHRoaXMubWVudSA9IHsKICAgICAgICAgIC4uLm1lbnVGb3JtCiAgICAgICAgfTsKICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB7CiAgICAgICAgICAuLi5wZXJGb3JtCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgYXBwZW5kKCkgewogICAgICB0aGlzLiRyZWZzLm1lbnUudmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKCF0aGlzLm1lbnUuaWQpIHsKICAgICAgICAgICAgLy8g5re75YqgCiAgICAgICAgICAgIGlmICh0aGlzLm1lbnUucGlkID09IDApIHsKICAgICAgICAgICAgICB0aGlzLmFwcGVuZExldmVsT25lKCk7IC8vIOS4gOe6p+WIhuexu+eahOa3u+WKoAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuYXBwZW5kTGV2ZWxUd28oKTsgLy8g5LqM57qn5YiG57G755qE5re75YqgCiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS/ruaUuQogICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLm1lbnUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlKG9iaikgewogICAgICBkZWJ1Z2dlcjsKICAgICAgbWVudS51cGRhdGUob2JqKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJwogICAgICAgIH0pOwogICAgICAgIC8vIOWIt+aWsOmhtemdogogICAgICAgIHRoaXMuZmV0Y2hOb2RlTGlzdCgpOwogICAgICAgIHRoaXMucmVzdERhdGEoKTsKICAgICAgfSk7CiAgICB9LAogICAgYXBwZW5kTGV2ZWxUd28oKSB7CiAgICAgIG1lbnUuc2F2ZUxldmVsT25lKHRoaXMubWVudSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gMeOAgeaKiuaWh+acrOahhuWFswogICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAvLyAy44CB5o+Q56S65oiQ5YqfCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5LqM57qn5YiG57G75oiQ5YqfJwogICAgICAgIH0pOwogICAgICAgIC8vIDPjgIHliLfmlrDpobXpnaIKICAgICAgICB0aGlzLmZldGNoTm9kZUxpc3QoKTsKICAgICAgICAvLyA044CB5oqKbWVudea4heepugogICAgICAgIHRoaXMubWVudSA9IHsKICAgICAgICAgIC4uLm1lbnVGb3JtCiAgICAgICAgfTsKICAgICAgICB0aGlzLnBlcm1pc3Npb24gPSB7CiAgICAgICAgICAuLi5wZXJGb3JtCiAgICAgICAgfTsKICAgICAgfSkuY2F0Y2gocmVzcG9uc2UgPT4gewogICAgICAgIC8vIDHjgIHmiormlofmnKzmoYblhbMKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgLy8gMuOAgeaPkOekuuaIkOWKnwogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6ICfmt7vliqDkuoznuqfliIbnsbvlpLHotKUnCiAgICAgICAgfSk7CiAgICAgICAgLy8gM+OAgeaKim1lbnXmuIXnqboKICAgICAgICB0aGlzLm1lbnUgPSB7CiAgICAgICAgICAuLi5tZW51Rm9ybQogICAgICAgIH07CiAgICAgICAgdGhpcy5wZXJtaXNzaW9uID0gewogICAgICAgICAgLi4ucGVyRm9ybQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGdldEJ5SWQoZGF0YSkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5tZW51ID0gZGF0YTsKICAgIH0sCiAgICB1cGRhdGVGdW5jdGlvbihkYXRhKSB7CiAgICAgIHRoaXMuZGlhbG9nUGVybWlzc2lvblZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLnBlcm1pc3Npb24gPSBkYXRhOwogICAgfSwKICAgIHJlc3REYXRhKCkgewogICAgICB0aGlzLmRpYWxvZ1Blcm1pc3Npb25WaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5tZW51ID0gewogICAgICAgIC4uLm1lbnVGb3JtCiAgICAgIH07CiAgICAgIHRoaXMucGVybWlzc2lvbiA9IHsKICAgICAgICAuLi5wZXJGb3JtCiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AAmFA;AAEA;EACAA;EACAC;EACAC;EACAC;EACAC;AACA;AACA;EACAC;EACAD;EACAJ;EACAE;EACAC;EACAF;AACA;AAEA;EACAK;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAjB;UAAAkB;UAAAC;UAAAC;QAAA;QACAlB;UAAAgB;UAAAC;UAAAC;QAAA;QACAjB;UAAAe;UAAAC;UAAAC;QAAA;MACA;MACAC;QACArB;UAAAkB;UAAAC;UAAAC;QAAA;QACAf;UAAAa;UAAAC;UAAAC;QAAA;MACA;IACA;EACA;EACA;EACAE;IACAf;MACA;IACA;EACA;EAEAgB;IACA;EACA;EAEAC;IACAC;MACAV;QACA;UACA;UACAW;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACAF;MAEA;QACAG;QACAC;QACA1B;MACA,GACA2B;QACA;MACA,GACAA;QACA;QACA;UACA3B;UACAgB;QACA;MACA,GACAY;QACA;QACA;UACA;YACA5B;YACAgB;UACA;QACA;UACA;YACAhB;YACAgB;UACA;QACA;MACA;IACA;IACAa;MACA;QACA;UACA;YACA;UACA;YACAlB;cACA;cACA;gBACAX;gBACAgB;cACA;cACA;cACA;cACA;gBAAA;cAAA;cACA;gBAAA;cAAA;YACA;UACA;QACA;MACA;IACA;IACAc;MACAnB,KACAoB,wBACAJ;QACA;QACA;UACA3B;UACAgB;QACA;QACA;QACA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;MACA,GACAY;QACA;QACA;QACA;UACA5B;UACAgB;QACA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;MACA;IACA;IAEAgB;MACA;QACA;UACA;YACA;YACA;cACA;YACA;cACA;YACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IAEAC;MACA;MACAtB;QACA;QACA;UACAX;UACAgB;QACA;QACA;QACA;QACA;MACA;IACA;IACAkB;MACAvB,KACAoB,wBACAJ;QACA;QACA;QACA;QACA;UACA3B;UACAgB;QACA;QACA;QACA;QACA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;MACA,GACAY;QACA;QACA;QACA;QACA;UACA5B;UACAgB;QACA;QACA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;MACA;IACA;IACAmB;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;IACA;EACA;AACA","names":["name","pid","path","component","type","permissionValue","data","filterText","menuList","defaultProps","children","label","dialogFormValue","dialogFormVisible","dialogPermissionVisible","menu","permission","menuValidateRules","required","trigger","message","permissionValidateRules","watch","created","methods","fetchNodeList","console","filterNode","remove","confirmButtonText","cancelButtonText","then","catch","appendPermission","appendLevelOne","saveLevelOne","append","update","appendLevelTwo","getById","updateFunction","restData"],"sourceRoot":"src/pages/workplace/menu","sources":["list.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-input v-model=\"filterText\" placeholder=\"Filter keyword\" style=\"margin-bottom:30px;\" />\r\n\r\n    <el-table :data=\"menuList\" :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\" style=\"width: 100%;margin-bottom: 20px;\" row-key=\"id\" border>\r\n      <el-table-column prop=\"name\" label=\"名称\" sortable width=\"180\" />\r\n      <el-table-column prop=\"path\" label=\"访问路径\" sortable width=\"180\" />\r\n      <el-table-column prop=\"component\" label=\"组件路径\" sortable width=\"180\" />\r\n      <el-table-column prop=\"permissionValue\" label=\"权限值\" />\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <!-- v-if=\"node.level == 1 || node.level == 2\" v-if=\"node.level == 3\" v-if=\"node.level == 4\"-->\r\n          <el-button\r\n            v-if=\"(scope.row.level == 1 || scope.row.level == 2) && hasPerm('permission.add')\"\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            @click=\"\r\n              () => {\r\n                ;(dialogFormVisible = true), (menu.pid = scope.row.id)\r\n              }\r\n            \"\r\n            >添加菜单\r\n          </el-button>\r\n          <el-button\r\n            v-if=\"scope.row.level == 3 && hasPerm('permission.add')\"\r\n            type=\"text\"\r\n            size=\"mini\"\r\n            @click=\"\r\n              () => {\r\n                ;(dialogPermissionVisible = true), (permission.pid = scope.row.id)\r\n              }\r\n            \"\r\n            >添加功能\r\n          </el-button>\r\n          <el-button v-if=\"scope.row.level == 4 && hasPerm('permission.update')\" type=\"text\" size=\"mini\" @click=\"() => updateFunction(scope.row)\">修改功能 </el-button>\r\n          <el-button v-if=\"scope.row.level != 4 && hasPerm('permission.update')\" type=\"text\" size=\"mini\" @click=\"() => getById(scope.row)\">修改 </el-button>\r\n          <el-button v-if=\"hasPerm('permission.remove')\" type=\"text\" size=\"mini\" @click=\"() => remove(scope.row)\">删除 </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog :visible.sync=\"dialogFormVisible\" :title=\"dialogFormValue\">\r\n      <el-form ref=\"menu\" :model=\"menu\" :rules=\"menuValidateRules\" label-width=\"120px\">\r\n        <el-form-item label=\"菜单名称\" prop=\"name\">\r\n          <el-input v-model=\"menu.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"访问路径\" prop=\"path\">\r\n          <el-input v-model=\"menu.path\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"组件路径\" prop=\"component\">\r\n          <el-input v-model=\"menu.component\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"restData()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"append()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <!-- 添加功能的窗口 -->\r\n    <el-dialog :visible.sync=\"dialogPermissionVisible\" title=\"添加功能\">\r\n      <el-form ref=\"permission\" :model=\"permission\" :rules=\"permissionValidateRules\" label-width=\"120px\">\r\n        <el-form-item label=\"功能名称\" prop=\"name\">\r\n          <el-input v-model=\"permission.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"访问路径\">\r\n          <el-input v-model=\"permission.path\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"组件路径\">\r\n          <el-input v-model=\"permission.component\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"功能权限值\" prop=\"permissionValue\">\r\n          <el-input v-model=\"permission.permissionValue\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"restData()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"appendPermission()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport menu from '@/api/acl/menu'\r\n\r\nconst menuForm = {\r\n  name: '',\r\n  pid: 0,\r\n  path: '',\r\n  component: '',\r\n  type: '1'\r\n}\r\nconst perForm = {\r\n  permissionValue: '',\r\n  type: '2',\r\n  name: '',\r\n  path: '',\r\n  component: '',\r\n  pid: 0\r\n}\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      filterText: '',\r\n      menuList: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'name'\r\n      },\r\n      dialogFormValue: '添加菜单',\r\n      dialogFormVisible: false,\r\n      dialogPermissionVisible: false,\r\n      menu: menuForm,\r\n      permission: perForm,\r\n      menuValidateRules: {\r\n        name: [{ required: true, trigger: 'blur', message: '菜单名必须输入' }],\r\n        path: [{ required: true, trigger: 'blur', message: '菜单路径必须输入' }],\r\n        component: [{ required: true, trigger: 'blur', message: '组件名称必须输入' }]\r\n      },\r\n      permissionValidateRules: {\r\n        name: [{ required: true, trigger: 'blur', message: '功能名称必须输入' }],\r\n        permissionValue: [{ required: true, trigger: 'blur', message: '功能权限值必须输入' }]\r\n      }\r\n    }\r\n  },\r\n  // 监听上面文本框搜索\r\n  watch: {\r\n    filterText(val) {\r\n      this.$refs.menuTree.filter(val)\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.fetchNodeList()\r\n  },\r\n\r\n  methods: {\r\n    fetchNodeList() {\r\n      menu.getNestedTreeList().then(response => {\r\n        if (response.success === true) {\r\n          this.menuList = response.data.children\r\n          console.log(this.menuList)\r\n        }\r\n      })\r\n    },\r\n    filterNode(value, data) {\r\n      if (!value) return true\r\n      return data.title.toLowerCase().indexOf(value.toLowerCase()) !== -1\r\n    },\r\n    remove(data) {\r\n      console.log(data)\r\n\r\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n        .then(() => {\r\n          return menu.removeById(data.id)\r\n        })\r\n        .then(() => {\r\n          this.fetchNodeList() // 刷新列表\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n        })\r\n        .catch(response => {\r\n          // 失败\r\n          if (response === 'cancel') {\r\n            this.$message({\r\n              type: 'info',\r\n              message: '已取消删除'\r\n            })\r\n          } else {\r\n            this.$message({\r\n              type: 'error',\r\n              message: '删除失败'\r\n            })\r\n          }\r\n        })\r\n    },\r\n    appendPermission() {\r\n      this.$refs.permission.validate(valid => {\r\n        if (valid) {\r\n          if (this.permission.id) {\r\n            this.update(this.permission)\r\n          } else {\r\n            menu.saveLevelOne(this.permission).then(response => {\r\n              this.dialogPermissionVisible = false\r\n              this.$message({\r\n                type: 'success',\r\n                message: '添加功能成功'\r\n              })\r\n              // 刷新页面\r\n              this.fetchNodeList()\r\n              this.menu = { ...menuForm }\r\n              this.permission = { ...perForm }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    appendLevelOne() {\r\n      menu\r\n        .saveLevelOne(this.menu)\r\n        .then(response => {\r\n          this.dialogFormVisible = false\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加一级菜单成功'\r\n          })\r\n          // 刷新页面\r\n          this.fetchNodeList()\r\n          this.menu = { ...menuForm }\r\n          this.permission = { ...perForm }\r\n        })\r\n        .catch(response => {\r\n          // 你们写：判断点击取消清空一下\r\n          this.dialogFormVisible = false\r\n          this.$message({\r\n            type: 'error',\r\n            message: '添加一级菜单失败'\r\n          })\r\n          this.menu = { ...menuForm }\r\n          this.permission = { ...perForm }\r\n        })\r\n    },\r\n\r\n    append() {\r\n      this.$refs.menu.validate(valid => {\r\n        if (valid) {\r\n          if (!this.menu.id) {\r\n            // 添加\r\n            if (this.menu.pid == 0) {\r\n              this.appendLevelOne() // 一级分类的添加\r\n            } else {\r\n              this.appendLevelTwo() // 二级分类的添加\r\n            }\r\n          } else {\r\n            // 修改\r\n            this.update(this.menu)\r\n          }\r\n        }\r\n      })\r\n    },\r\n\r\n    update(obj) {\r\n      debugger\r\n      menu.update(obj).then(response => {\r\n        this.dialogFormVisible = false\r\n        this.$message({\r\n          type: 'success',\r\n          message: '修改成功'\r\n        })\r\n        // 刷新页面\r\n        this.fetchNodeList()\r\n        this.restData()\r\n      })\r\n    },\r\n    appendLevelTwo() {\r\n      menu\r\n        .saveLevelOne(this.menu)\r\n        .then(response => {\r\n          // 1、把文本框关\r\n          this.dialogFormVisible = false\r\n          // 2、提示成功\r\n          this.$message({\r\n            type: 'success',\r\n            message: '添加二级分类成功'\r\n          })\r\n          // 3、刷新页面\r\n          this.fetchNodeList()\r\n          // 4、把menu清空\r\n          this.menu = { ...menuForm }\r\n          this.permission = { ...perForm }\r\n        })\r\n        .catch(response => {\r\n          // 1、把文本框关\r\n          this.dialogFormVisible = false\r\n          // 2、提示成功\r\n          this.$message({\r\n            type: 'error',\r\n            message: '添加二级分类失败'\r\n          })\r\n          // 3、把menu清空\r\n          this.menu = { ...menuForm }\r\n          this.permission = { ...perForm }\r\n        })\r\n    },\r\n    getById(data) {\r\n      this.dialogFormVisible = true\r\n      this.menu = data\r\n    },\r\n    updateFunction(data) {\r\n      this.dialogPermissionVisible = true\r\n      this.permission = data\r\n    },\r\n    restData() {\r\n      this.dialogPermissionVisible = false\r\n      this.dialogFormVisible = false\r\n      this.menu = { ...menuForm }\r\n      this.permission = { ...perForm }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}