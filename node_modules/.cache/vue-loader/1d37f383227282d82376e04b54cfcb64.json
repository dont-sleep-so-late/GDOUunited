{"remainingRequest":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\src\\pages\\teacher\\list.vue?vue&type=style&index=0&id=74ae73af&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\src\\pages\\teacher\\list.vue","mtime":1709116635331},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655715156000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYXBwLW1haW4gew0KICBtaW4taGVpZ2h0OiAxMDAlOw0KfQ0KDQouYXBwLWNvbnRhaW5lciB7DQogIHBhZGRpbmc6IDIwcHg7DQp9DQouZWwtZGF0ZS1waWNrZXIsDQouZWwtc2VsZWN0LA0KLmVsLWlucHV0IHsNCiAgd2lkdGg6IDUwJTsNCn0NCg0KLnVzZXItaGVhZGVyIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQoudXNlci1oZWFkZXItY29tIHsNCiAgd2lkdGg6IDE0NHB4Ow0KICBoZWlnaHQ6IDE0NHB4Ow0KICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQp9DQouaGVhZGVyLXVwbG9hZC1idG4gew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIGxlZnQ6IDA7DQogIHRvcDogMDsNCiAgb3BhY2l0eTogMDsNCiAgLyog6YCa6L+H5a6a5L2N5oqKaW5wdXTmlL7lnKhpbWfmoIfnrb7kuIrpnaLvvIzpgJrov4fkuI3pgI/mmI7luqbpmpDol48gKi8NCn0NCg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";AAm7BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/teacher","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    成员列表\r\n    <!--查询表单-->\r\n    <!-- <el-form :inline=\"true\"\r\n             class=\"demo-form-inline\"\r\n             :model=\"searchList\"\r\n             :rules=\"sendData.searchListRules\">\r\n      <el-form-item>\r\n        <el-input v-model=\"searchList.name\"\r\n                  placeholder=\"成员名\"\r\n                  style=\"width: 100%\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-select v-model=\"searchList.party\"\r\n                   clearable\r\n                   placeholder=\"党派\"\r\n                   style=\"width: 100%\">\r\n          <el-option v-for=\"item in partyDataAxis\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-select v-model=\"searchList.otherParty\"\r\n                   clearable\r\n                   placeholder=\"非民主党派\"\r\n                   style=\"width: 100%\">\r\n          <el-option v-for=\"item in otherPartyDataAxis\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-select v-model=\"searchList.department\"\r\n                   clearable\r\n                   placeholder=\"学院\"\r\n                   style=\"width: 100%\">\r\n          <el-option v-for=\"item in departmentDataAxis\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-button type=\"primary\"\r\n                 icon=\"el-icon-search\"\r\n                 @click=\"toQuery\">查询</el-button>\r\n      <el-button type=\"default\"\r\n                 @click=\"showDetail\">查询所有</el-button>\r\n    </el-form> -->\r\n    <!-- 导出表单 -->\r\n    <el-form :inline=\"true\"\r\n             class=\"demo-form-inline\"\r\n             :model=\"exportList\"\r\n             :rules=\"sendData.searchListRules\">\r\n      \r\n      <el-form-item>\r\n        <el-select v-model=\"exportList.committee\"\r\n                   clearable\r\n                   placeholder=\"党派职务\"\r\n                   style=\"width: 100%\">\r\n          <el-option v-for=\"item in committeeAxis\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-select v-model=\"exportList.title\"\r\n                   clearable\r\n                   placeholder=\"职称\"\r\n                   style=\"width: 100%\">\r\n          <el-option v-for=\"item in titleDataAxis\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.label\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-select v-model=\"exportList.fulltimedegree\"\r\n                   clearable\r\n                   placeholder=\"学历\"\r\n                   style=\"width: 100%\">\r\n          <el-option v-for=\"item in fulltimedegreeDataAxis\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.label\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-button type=\"primary\"\r\n                 icon=\"el-icon-download\"\r\n                 @click=\"handleDownload\">导出</el-button>\r\n      <el-button type=\"default\"\r\n      icon=\"el-icon-download\"\r\n                 @click=\"handleDownloadAll\">导出所有</el-button>\r\n    </el-form>\r\n    <!-- 表格 -->\r\n    <el-table v-loading=\"listLoading\"\r\n              :data=\"list\"\r\n              border\r\n              fit\r\n              highlight-current-row\r\n              stripe\r\n              height=\"500\">\r\n      <!-- <el-table-column label=\"序号\" width=\"150\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column> -->\r\n      <el-table-column type=\"index\"\r\n                       :index=\"indexMethod\"\r\n                       label=\"#\">\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"name\"\r\n                       label=\"姓名\"\r\n                       align=\"center\" />\r\n\r\n      <el-table-column prop=\"department\"\r\n                       label=\"学院/部门\"\r\n                       align=\"center\" />\r\n\r\n      <el-table-column label=\"职务\"\r\n                       align=\"center\"\r\n                       prop=\"currentPosition\">\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"party\"\r\n                       label=\"党派\"\r\n                       align=\"center\" />\r\n\r\n      <el-table-column prop=\"phone\"\r\n                       label=\"手机号码\"\r\n                       align=\"center\" />\r\n      <el-table-column prop=\"committee\"\r\n                       label=\"党派职务\" \r\n                       align=\"center\"/>\r\n\r\n      <el-table-column prop=\"title\"\r\n                       label=\"职称\"\r\n                       align=\"center\" />\r\n\r\n      <el-table-column label=\"操作\"\r\n                       align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <!-- <router-link :to=\"'/teacher/edit/' + scope.row.id\">\r\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\"\r\n              >修改</el-button\r\n            >\r\n          </router-link> -->\r\n          <el-button type=\"primary\"\r\n                     size=\"mini\"\r\n                     icon=\"el-icon-edit\"\r\n                     @click=\"showEditDialog(scope.row)\">\r\n            修改\r\n          </el-button>\r\n          <el-button style=\"margin:7px\" type=\"danger\"\r\n                     size=\"mini\"\r\n                     icon=\"el-icon-delete\"\r\n                     @click=\"removeDataById(scope.row, scope.$index)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <el-pagination v-if=\"isShow\"\r\n                   background\r\n                   layout=\"prev, pager, next\"\r\n                   :page-size=\"20\"\r\n                   :total=\"total\"\r\n                   @current-change=\"pageChange\">\r\n    </el-pagination>\r\n\r\n    <!--修改用户的对话框  -->\r\n    <el-dialog title=\"修改用户信息\"\r\n               :visible.sync=\"editDialogVisible\"\r\n               width=\"50%\"\r\n               @close=\"editDialogClosed\">\r\n      <el-form ref=\"editFormRef\"\r\n               :model=\"editForm\"\r\n               label-width=\"100px\">\r\n        <!-- prop是绑定验证规则的属性 -->\r\n        <el-form-item label=\"头像\"\r\n                      prop=\"imgUrl\">\r\n\r\n          <div class=\"user-header\">\r\n            <input type=\"file\"\r\n                   accept=\"image/*\"\r\n                   @change='onchangeImgFun'\r\n                   class=\"header-upload-btn user-header-com\">\r\n            <img alt=\"\"\r\n                 :src='editForm.imgUrl'\r\n                 class=\" user-header-com\">\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\"\r\n                      prop=\"name\">\r\n          <el-input v-model=\"editForm.name\"\r\n                    placeholder=\"请输入成员姓名\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"性别\"\r\n                      prop=\"sex\">\r\n          <el-input v-model=\"editForm.sex\"\r\n                    placeholder=\"请输入成员性别\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"民族\"\r\n                      prop=\"nationId\">\r\n          <el-select v-model=\"editForm.nationId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in nationDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"出生日期\"\r\n                      prop=\"birth\">\r\n          <el-date-picker v-model=\"editForm.birth\"\r\n                          type=\"month\"\r\n                          format=\"yyyy 年 MM 月\"\r\n                          value-format=\"yyyy-MM\"\r\n                          placeholder=\"请选择年-月\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"政治面貌\"\r\n                      prop=\"politicsId\">\r\n          <el-select v-model=\"editForm.politicsId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in politicalPositionAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"加入时间\"\r\n                      prop=\"joinPartyDate\">\r\n          <el-date-picker v-model=\"editForm.joinPartyDate\"\r\n                          type=\"month\"\r\n                          format=\"yyyy 年 MM 月\"\r\n                          value-format=\"yyyy-MM\"\r\n                          placeholder=\"请选择年-月\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"学位\"\r\n                      prop=\"bachelorId\">\r\n          <el-select v-model=\"editForm.bachelorId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in bachelorAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"全日制学历\"\r\n                      prop=\"fulltimedegreeId\">\r\n          <el-select v-model=\"editForm.fulltimedegreeId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in fulltimedegreeDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"职称\"\r\n                      prop=\"titleId\">\r\n          <el-select v-model=\"editForm.titleId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in titleDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"学院/部门\"\r\n                      prop=\"departmentId\">\r\n          <el-select v-model=\"editForm.departmentId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in departmentDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"教职工类别\"\r\n                      prop=\"currentPositionData\">\r\n          <el-select v-model=\"editForm.currentPositionData\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in currentPositionDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"校区\"\r\n                      prop=\"campusId\">\r\n          <el-select v-model=\"editForm.campusId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in campusAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"民主党派\"\r\n                      prop=\"partyId\">\r\n          <el-select v-model=\"editForm.partyId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in partyDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"非民主党派\"\r\n                      prop=\"otherPartyId\">\r\n          <el-select v-model=\"editForm.otherPartyId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in otherPartyDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"政治安排\"\r\n                      prop=\"politicalPositionId\">\r\n          <el-select v-model=\"editForm.politicalPositionId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in politicalPositionAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"区域\"\r\n                      prop=\"areaId\">\r\n          <el-select v-model=\"editForm.areaId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in areaDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"组织身份\"\r\n                      prop=\"organizationId\">\r\n          <el-select v-model=\"editForm.organizationId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in identityAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号码\"\r\n                      prop=\"phone\">\r\n          <el-input v-model=\"editForm.phone\"\r\n                    placeholder=\"请输入成员手机号码\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"任职轴\"\r\n                      prop=\"positionAxis\">\r\n          <el-input type=\"textarea\"\r\n                    clearable\r\n                    v-model=\"editForm.positionAxis\"\r\n                    style=\"width:50%;\"\r\n                    placeholder=\"请输入成员任职轴\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动轴\"\r\n                      prop=\"activeAxis\">\r\n          <el-input type=\"textarea\"\r\n                    clearable\r\n                    v-model=\"editForm.activeAxis\"\r\n                    style=\"width:50%;\"\r\n                    placeholder=\"请输入成员活动轴\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"获奖轴\"\r\n                      prop=\"awardAxis\">\r\n          <el-input type=\"textarea\"\r\n                    clearable\r\n                    v-model=\"editForm.awardAxis\"\r\n                    style=\"width:50%;\"\r\n                    placeholder=\"请输入成员获奖轴\">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"籍贯\"\r\n                      prop=\"nativePlace\">\r\n          <el-input v-model=\"editForm.nativePlace\"\r\n                    placeholder=\"请输入成员籍贯\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"职务\"\r\n                      prop=\"job\">\r\n          <el-input v-model=\"editForm.job\"\r\n                    placeholder=\"请输入成员职务\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"职位级别\"\r\n                      prop=\"jobLevelId\">\r\n          <el-select v-model=\"editForm.jobLevelId\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in jobLevelAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <!-- <el-form-item label=\"参加工作\">\r\n          <el-date-picker v-model=\"editForm.startWorkingDate\"\r\n                          type=\"month\"\r\n                          format=\"yyyy 年 MM 月\"\r\n                          value-format=\"yyyy-MM\"\r\n                          placeholder=\"请选择年-月\" />\r\n        </el-form-item> -->\r\n\r\n        <!-- <el-form-item label=\"信教情况\"\r\n                      prop=\"email\">\r\n          <el-select v-model=\"editForm.religion\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in religionDataAxis\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item> -->\r\n\r\n        <!-- <el-form-item label=\"留学情况\"\r\n                      prop=\"email\">\r\n          <el-select v-model=\"editForm.isAbroad\"\r\n                     placeholder=\"请选择\">\r\n            <el-option v-for=\"item in aboardList\"\r\n                       :key=\"item.value\"\r\n                       :label=\"item.label\"\r\n                       :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item> -->\r\n\r\n      </el-form>\r\n      <span slot=\"footer\"\r\n            class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\"\r\n                   @click=\"saveRoleInfo\">确 定</el-button>\r\n        <!-- @click=\"editUserInfo\" -->\r\n      </span>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport teacher from \"@/pages/teacher/teacher.js\";\r\n\r\nexport default {\r\n  // 代码核心方法\r\n\r\n  data () {\r\n    // 定义变量和函数值\r\n    var validatePass = (rule, value, callback) => {\r\n      if (this.searchList.party !== '') {\r\n        callback(new Error('不能同时输入民主党派和非民主党派'));\r\n      }\r\n      callback();\r\n\r\n    };\r\n    return {\r\n      file: '',\r\n      imgStr: null,\r\n      listLoading: true, // 数据是否正在加载\r\n      isShow: true,\r\n      list: null, // 查询之后接口放回的集合\r\n      // page: 1, // 开始页\r\n      // limit: 10, // 每页记录数\r\n      total: 0, // 总记录数\r\n      listQuery: {\r\n        current: 0,\r\n        limit: 9999,\r\n        name: \"\",\r\n        party: \"\",\r\n        department: \"\",\r\n        title: \"\",\r\n\r\n      }, // 查询条件\r\n      editDialogVisible: false,//修改弹出框的显示与隐藏\r\n      editForm: [],\r\n      exportList: {\r\n        title:'',\r\n        fulltimedegree:'',\r\n        committee:''\r\n      },\r\n      searchList: {\r\n        file: '',\r\n        name: '',\r\n        party: '',\r\n        otherParty: '',\r\n        department: ''\r\n      },\r\n\r\n      abroadTimeAxis: [],\r\n      abroadTimeDataAxis: [],\r\n      abroadTime: '',\r\n      abroadTimeData: [],\r\n      abroadTimeDataAxis: [],\r\n      abroadTime: '',\r\n      departmentData: [],\r\n      departmentDataAxis: [],\r\n      department: '',\r\n      partyData: [],\r\n      partyDataAxis: [],\r\n      party: '',\r\n      politicalArrangement: '',\r\n      politicalArrangementData: [],\r\n      politicalArrangementAxis: [],\r\n      otherPartyData: [],\r\n      otherPartyDataAxis: [],\r\n      otherParty: '',\r\n      nationData: [],\r\n      nationDataAxis: [],\r\n      fulltimedegreeData: [],\r\n      fulltimedegreeDataAxis: [],\r\n      bachelorAxis: [],\r\n      bachelor: [],\r\n      areaData: [],\r\n      areaDataAxis: [],\r\n      religionData: [],\r\n      religionDataAxis: [],\r\n      currentPositionData: [],\r\n      currentPositionDataAxis: [],\r\n      titleData: [],\r\n      titleDataAxis: [],\r\n      politicalPosition: [],\r\n      politicalPositionAxis: [],\r\n      jobLevel: [],\r\n      jobLevelAxis: [],\r\n      identity: [],\r\n      identityAxis: [],\r\n      committee: [\r\n      ],\r\n      committeeAxis: [       {\r\nvalue:0,\r\nlabel:'主委'\r\n        },\r\n        {\r\n          value:1,\r\nlabel:'副主委'\r\n        },\r\n        {\r\n          value:2,\r\nlabel:'委员'\r\n        }],\r\n      campus: [],\r\n      campusAxis: [],\r\n      aboardList: [\r\n        {\r\n          value: 0,\r\n          label: '留学'\r\n        },\r\n        {\r\n          value: 1,\r\n          label: '未留学'\r\n        }\r\n      ],\r\n      sendData: {\r\n        positionAxis: '',\r\n        activeAxis: '',\r\n        awardAxis: '',\r\n        name: '',\r\n        sex: '',\r\n        departmentId: '',\r\n        currentPositionId: '',\r\n        religionId: '',\r\n        currentJob: '',\r\n        allParty: '',\r\n        nationId: '',\r\n        birth: '',\r\n        nativePlace: '',\r\n        fulltimedegreeId: '',\r\n        titleId: '',\r\n        startWorkingDate: '',\r\n        stateOfRetire: '',\r\n        joinPartyDate: '',\r\n        phone: '',\r\n        email: '',\r\n        isabroad: '',\r\n        remark: '',\r\n        currentZhiTime: '',\r\n        currentJiTime: '',\r\n        idCard: '',\r\n        partyId: '',\r\n        otherPartyId: '',\r\n        position: '',\r\n        areaId: '',\r\n        politicalPositionId: '',\r\n        jobLevelId: '',\r\n        organizationId: '',\r\n        committee: '',\r\n        campusId: '',\r\n        file: '',\r\n        searchListRules: {\r\n          pass: [\r\n            { validator: validatePass, trigger: 'blur' }\r\n          ],\r\n        }\r\n      },\r\n    };\r\n  },\r\n\r\n  created () {\r\n    // 页面渲染之前执行，一般调用methods中的方法\r\n    // this.getList()\r\n    this.$axios\r\n      .get(\"http://localhost:9106/service/renwuku/queryallpeople\")\r\n      .then((res) => {\r\n        this.total = res.data.t.length;\r\n        this.list = res.data.t.slice(0, 20);\r\n        this.listLoading = false;\r\n      });\r\n\r\n    // this.showname()\r\n    this.getDepartment()\r\n    console.log(this.editForm);\r\n  },\r\n  methods: {\r\n    onchangeImgFun (e) {\r\n      console.log(e.target.files[0]);\r\n      this.editForm.imgUrl = window.URL.createObjectURL(e.target.files[0])\r\n      console.log(window.URL.createObjectURL(e.target.files[0])) // 获取当前文件的信息\r\n      this.file = e.target.files[0]\r\n      console.log(this.file);\r\n      console.log(this.editForm.imgUrl);\r\n\r\n    },\r\n    async getDepartment () {\r\n      // 学位\r\n      let { data: res15 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryBachelor\")\r\n      res15.t.map(item => {\r\n        this.bachelor = JSON.parse(JSON.stringify(item).replace('bachelorId', 'value').replace('bachelor', 'label'))\r\n        this.bachelorAxis.push(this.bachelor)\r\n      })\r\n      // 职位级别\r\n      let { data: res11 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllJobLevel\")\r\n      res11.t.map(item => {\r\n        this.jobLevel = JSON.parse(JSON.stringify(item).replace('jobLevelId', 'value').replace('jobLevel', 'label'))\r\n        this.jobLevelAxis.push(this.jobLevel)\r\n      })\r\n      // 学院/部门\r\n      let { data: res5 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllDept\")\r\n      res5.t.map(item => {\r\n        this.departmentData = JSON.parse(JSON.stringify(item).replace('departmentId', 'value').replace('department', 'label'))\r\n        this.departmentDataAxis.push(this.departmentData)\r\n      })\r\n      //非民主党派\r\n      let { data: res9 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllPartyOthers\")\r\n      res9.t.map(item => {\r\n        this.otherPartyData = JSON.parse(JSON.stringify(item).replace('pid', 'value').replace('otherParty', 'label'))\r\n        this.otherPartyDataAxis.push(this.otherPartyData)\r\n      })\r\n\r\n      // 政治面貌\r\n      let { data: res10 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryPolitics\")\r\n      res10.t.map(item => {\r\n        this.politicalPosition = JSON.parse(JSON.stringify(item).replace('politicsId', 'value').replace('politics', 'label'))\r\n        this.politicalPositionAxis.push(this.politicalPosition)\r\n      })\r\n      // 民族\r\n      let { data: res1 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllNations\")\r\n      res1.t.map(item => {\r\n        this.nationData = JSON.parse(JSON.stringify(item).replace('nationId', 'value').replace('nation', 'label'))\r\n        this.nationDataAxis.push(this.nationData)\r\n      })\r\n      //校区\r\n      let { data: res14 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllCampuses\")\r\n      res14.t.map(item => {\r\n        this.campus = JSON.parse(JSON.stringify(item).replace('campusId', 'value').replace('campus', 'label'))\r\n        this.campusAxis.push(this.campus)\r\n      })\r\n      //组织身份\r\n      let { data: res12 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllOrganizationIdentity\")\r\n      res12.t.map(item => {\r\n        this.identity = JSON.parse(JSON.stringify(item).replace('oidentity', 'label').replace('oid', 'value'))\r\n        this.identityAxis.push(this.identity)\r\n      })\r\n      // 全日制学历\r\n      let { data: res2 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllFullTimeDegree\")\r\n      res2.t.map(item => {\r\n        this.fulltimedegreeData = JSON.parse(JSON.stringify(item).replace('fulltimedegreeId', 'value').replace('fulltimedegree', 'label'))\r\n        this.fulltimedegreeDataAxis.push(this.fulltimedegreeData)\r\n      })\r\n      // 职称\r\n      let { data: res7 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllTitle\")\r\n      res7.t.map(item => {\r\n        this.titleData = JSON.parse(JSON.stringify(item).replace('titleId', 'value').replace('title', 'label'))\r\n        this.titleDataAxis.push(this.titleData)\r\n      })\r\n\r\n      //民主党派\r\n      let { data: res8 } = await this.$axios.post(\"http://localhost:9106/service/party/queryAllParty\")\r\n      res8.t.map(item => {\r\n        this.partyData = JSON.parse(JSON.stringify(item).replace('partyId', 'value').replace('party', 'label'))\r\n        this.partyDataAxis.push(this.partyData)\r\n      })\r\n\r\n      //政治安排\r\n      let { data: res17 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllPolitical\")\r\n      res17.t.map(item => {\r\n        this.politicalArrangement = JSON.parse(JSON.stringify(item).replace('politicalPositionId', 'value').replace('position', 'label'))\r\n        this.politicalArrangementAxis.push(this.politicalArrangement)\r\n      })\r\n      //区域\r\n      let { data: res3 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllAreas\")\r\n      res3.t.map(item => {\r\n        this.areaData = JSON.parse(JSON.stringify(item).replace('areaId', 'value').replace('area', 'label'))\r\n        this.areaDataAxis.push(this.areaData)\r\n      })\r\n\r\n\r\n\r\n      // 教职工类别\r\n      let { data: res6 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAllCurrentPosition\")\r\n      res6.t.map(item => {\r\n        this.currentPositionData = JSON.parse(JSON.stringify(item).replace('currentPositionId', 'value').replace('currentPosition', 'label'))\r\n        this.currentPositionDataAxis.push(this.currentPositionData)\r\n      })\r\n      //留学时间\r\n      let { data: res16 } = await this.$axios.post(\"http://localhost:9106/service/renwuku/queryAbroadTime\")\r\n      res16.t.map(item => {\r\n        this.abroadTime = JSON.parse(JSON.stringify(item).replace('abroadTimeId', 'value').replace('time', 'label'))\r\n        this.abroadTimeAxis.push(this.abroadTime)\r\n      })\r\n    },\r\n\r\n    // 创建具体的方法，调用teacher.js定义的方法\r\n    getList (page = 1) {\r\n      this.page = page;\r\n      teacher\r\n        .getTeacherListPage(this.page, this.limit, this.teachQuery)\r\n        .then((response) => {\r\n          // 请求成功，response接口返回的数据\r\n          this.list = response.data.rows;\r\n          console.log(this.list); // 返回数据集合\r\n          this.total = response.data.total;\r\n          console.log(this.total); // 总记录数\r\n          this.listLoading = false;\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        }); // 请求失败\r\n    },\r\n    resetData () {\r\n      // 清空的方法\r\n      // 双向绑定输入框的数据清空\r\n      this.teachQuery = {};\r\n      this.getList();\r\n    },\r\n    removeDataById (data, index) {\r\n      this.$confirm(\"此操作将永久删除讲师记录, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n\r\n        this.$axios\r\n          .post(\r\n            `http://localhost:9106/service/renwuku/deletePeople/${data.id}`\r\n          )\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.list.splice(index, 1);\r\n            alert(\"删除成功！\");\r\n          });\r\n      }).catch(() => {\r\n        this.$message.info('已取消删除');\r\n      }); // 点击取消，执行catch方法\r\n\r\n\r\n    },\r\n    indexMethod (index) {\r\n      return index + 1;\r\n    },\r\n    pageChange (currentPage) {\r\n      this.$axios\r\n        .get(\"http://localhost:9106/service/renwuku/queryallpeople\")\r\n        .then((res) => {\r\n          this.list = res.data.t.slice(\r\n            (currentPage - 1) * 20,\r\n            currentPage * 20\r\n          );\r\n          this.indexMethod = function (index) {\r\n            return index + 1 + (currentPage - 1) * 20;\r\n          };\r\n        });\r\n    },\r\n    // 查询\r\n    toQuery () {\r\n      this.$axios\r\n        .get(\r\n          `http://localhost:9106/service/renwuku/queryPeopleByCondition?title=${this.exportList.title}&fulltimedegree=${this.exportList.fulltimedegree}&committee=${this.exportList.committee}`,\r\n        )\r\n        .then((res) => {\r\n          this.list = res.data.t;\r\n          this.isShow = false;\r\n          console.log(res.data);\r\n        });\r\n    },\r\n    // 查询所有\r\n    showDetail () {\r\n      this.$axios\r\n        .get(\"http://localhost:9106/service/renwuku/queryallpeople\")\r\n        .then((res) => {\r\n          this.total = res.data.t.length;\r\n          this.list = res.data.t.slice(0, 20);\r\n          this.isShow = true;\r\n        });\r\n    },\r\n    //展示编辑用户的对话框\r\n    async showEditDialog (row) {\r\n\r\n      this.editForm = row\r\n      this.editDialogVisible = true\r\n      console.log(this.editForm);\r\n    },\r\n    //监听修改用户对话框的关闭事件\r\n    editDialogClosed () {\r\n      this.$refs.editFormRef.resetFields()\r\n    },\r\n    //修改信息\r\n    async saveRoleInfo () {\r\n\r\n      this.$axios.post('http://localhost:9106/service/renwuku/updatePeople', this.editForm, { headers: { 'content-type': 'multipart/form-data' } }).then(res => {\r\n        alert('修改成功！')\r\n        console.log(res);\r\n        // 回到列表页面，路由跳转\r\n        this.editDialogVisible = false\r\n        // if (!res.ok) {\r\n        //   return this.$message.error('更新角色失败！')\r\n        // }\r\n      })\r\n\r\n\r\n\r\n      this.editDialogVisible = false\r\n    },\r\n //筛选导出\r\n handleDownload() {\r\n  this.$axios({\r\n  url: `http://localhost:9106/service/renwuku/exportExcel?committee=${this.exportList.committee}&title=${this.exportList.title}&fulltimedegree=${this.exportList.fulltimedegree}`,\r\n  method: 'post',\r\n  data: '1',\r\n  responseType: 'blob'\r\n})\r\n        .then(response => {\r\n          console.log('成功');\r\n          console.log(response.data);\r\n          const filename = this.getFileName();\r\n          const blobPart = response.data;\r\n          this.downloadExcel(blobPart, filename);\r\n        })\r\n        .catch(error => {\r\n          console.error(\"下载失败\", error);\r\n        });\r\n    },\r\n //导出全部\r\n    handleDownloadAll() {\r\n  this.$axios({\r\n  url: `http://localhost:9106/service/renwuku/exportExcel`,\r\n  method: 'post',\r\n  data: '1',\r\n  responseType: 'blob'\r\n})\r\n        .then(response => {\r\n          console.log('成功');\r\n          console.log(response.data);\r\n          const filename = this.getFileName();\r\n          const blobPart = response.data;\r\n          this.downloadExcel(blobPart, filename);\r\n        })\r\n        .catch(error => {\r\n          console.error(\"下载失败\", error);\r\n        });\r\n    },\r\n    downloadExcel(blobPart, filename) {\r\n      const blob = new Blob([blobPart], { type: 'application/vnd.ms-excel' });\r\n      const url = URL.createObjectURL(blob);\r\n\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = decodeURIComponent(filename);\r\n      link.style.display = 'none';\r\n\r\n      document.body.appendChild(link);\r\n      link.click();\r\n\r\n      URL.revokeObjectURL(url);\r\n      document.body.removeChild(link);\r\n    },\r\n    getFileName() {\r\n  // 获取当前时间\r\n  const currentDate = new Date();\r\n  const year = currentDate.getFullYear();\r\n  const month = String(currentDate.getMonth() + 1).padStart(2, '0');\r\n  const day = String(currentDate.getDate()).padStart(2, '0');\r\n  const hours = String(currentDate.getHours()).padStart(2, '0');\r\n  const minutes = String(currentDate.getMinutes()).padStart(2, '0');\r\n  const seconds = String(currentDate.getSeconds()).padStart(2, '0');\r\n\r\n  // 拼接文件名\r\n  const fileName = `成员数据${year}${month}${day}${hours}${minutes}${seconds}`;\r\n\r\n  return fileName;\r\n}\r\n\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-main {\r\n  min-height: 100%;\r\n}\r\n\r\n.app-container {\r\n  padding: 20px;\r\n}\r\n.el-date-picker,\r\n.el-select,\r\n.el-input {\r\n  width: 50%;\r\n}\r\n\r\n.user-header {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n.user-header-com {\r\n  width: 144px;\r\n  height: 144px;\r\n  display: inline-block;\r\n}\r\n.header-upload-btn {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  opacity: 0;\r\n  /* 通过定位把input放在img标签上面，通过不透明度隐藏 */\r\n}\r\n</style>\r\n"]}]}