{"remainingRequest":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\src\\views\\ums\\menu\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\src\\views\\ums\\menu\\index.vue","mtime":1711087300000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710918915895},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\babel-loader\\lib\\index.js","mtime":1710918914227},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710918915895},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\GDOUunited\\node_modules\\vue-loader\\lib\\index.js","mtime":1710918931244}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGZldGNoTGlzdCwgZGVsZXRlTWVudSwgdXBkYXRlTWVudSwgdXBkYXRlSGlkZGVuIH0gZnJvbSAnQC9hcGkvbWVudScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibWVudUxpc3QiLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgdG90YWw6IG51bGwsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiA1CiAgICAgIH0sCiAgICAgIHBhcmVudElkOiAwCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMucmVzZXRQYXJlbnRJZCgpOwogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlIChyb3V0ZSkgewogICAgICB0aGlzLnJlc2V0UGFyZW50SWQoKTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldFBhcmVudElkICgpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5wYXJlbnRJZCAhPSBudWxsKSB7CiAgICAgICAgdGhpcy5wYXJlbnRJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhcmVudElkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFyZW50SWQgPSAwOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQWRkTWVudSAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdW1zL2FkZE1lbnUnKTsKICAgIH0sCiAgICBnZXRMaXN0ICgpIHsKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgIGZldGNoTGlzdCh0aGlzLnBhcmVudElkLCB0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDsKICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSAxOwogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZSA9IHZhbDsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSAodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSB2YWw7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwoKICAgIH0sCiAgICBoYW5kbGVIaWRkZW5DaGFuZ2UgKGluZGV4LCByb3cpIHsKICAgICAgdXBkYXRlSGlkZGVuKHJvdy5pZCwgeyBoaWRkZW46IHJvdy5oaWRkZW4gfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNob3dOZXh0TGV2ZWwgKGluZGV4LCByb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL3Vtcy9tZW51JywgcXVlcnk6IHsgcGFyZW50SWQ6IHJvdy5pZCB9IH0pCiAgICB9LAogICAgaGFuZGxlVXBkYXRlIChpbmRleCwgcm93KSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy91bXMvdXBkYXRlTWVudScsIHF1ZXJ5OiB7IGlkOiByb3cuaWQgfSB9KTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUgKGluZGV4LCByb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm6KaB5Yig6Zmk6K+l6I+c5Y2VJywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIGRlbGV0ZU1lbnUocm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBsZXZlbEZpbHRlciAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAwKSB7CiAgICAgICAgcmV0dXJuICfkuIDnuqcnOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAxKSB7CiAgICAgICAgcmV0dXJuICfkuoznuqcnOwogICAgICB9CiAgICB9LAogICAgZGlzYWJsZU5leHRMZXZlbCAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA2DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ums/menu","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <i class=\"el-icon-tickets\" style=\"margin-top: 5px\"></i>\n      <span style=\"margin-top: 5px\">数据列表</span>\n      <el-button class=\"btn-add\" @click=\"handleAddMenu()\" size=\"mini\">\n        添加\n      </el-button>\n    </el-card>\n    <div class=\"table-container\">\n      <el-table ref=\"menuTable\" style=\"width: 100%\" :data=\"list\" v-loading=\"listLoading\" border>\n        <el-table-column label=\"编号\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">{{scope.row.id}}</template>\n        </el-table-column>\n        <el-table-column label=\"菜单名称\" align=\"center\">\n          <template slot-scope=\"scope\">{{scope.row.title}}</template>\n        </el-table-column>\n        <el-table-column label=\"菜单级数\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">{{scope.row.level | levelFilter}}</template>\n        </el-table-column>\n        <el-table-column label=\"前端名称\" align=\"center\">\n          <template slot-scope=\"scope\">{{scope.row.name}}</template>\n        </el-table-column>\n        <el-table-column label=\"前端图标\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\"><svg-icon :icon-class=\"scope.row.icon\"></svg-icon></template>\n        </el-table-column>\n        <el-table-column label=\"是否显示\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-switch @change=\"handleHiddenChange(scope.$index, scope.row)\" :active-value=\"0\" :inactive-value=\"1\" v-model=\"scope.row.hidden\">\n            </el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"排序\" width=\"100\" align=\"center\">\n          <template slot-scope=\"scope\">{{scope.row.sort }}</template>\n        </el-table-column>\n        <el-table-column label=\"设置\" width=\"120\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"text\" :disabled=\"scope.row.level | disableNextLevel\" @click=\"handleShowNextLevel(scope.$index, scope.row)\">查看下级\n            </el-button>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"200\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"text\" @click=\"handleUpdate(scope.$index, scope.row)\">编辑\n            </el-button>\n            <el-button size=\"mini\" type=\"text\" @click=\"handleDelete(scope.$index, scope.row)\">删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <div class=\"pagination-container\">\n      <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" layout=\"total, sizes,prev, pager, next,jumper\" :page-size=\"listQuery.pageSize\" :page-sizes=\"[5,10,15]\" :current-page.sync=\"listQuery.pageNum\" :total=\"total\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fetchList, deleteMenu, updateMenu, updateHidden } from '@/api/menu'\n\nexport default {\n  name: \"menuList\",\n  data () {\n    return {\n      list: null,\n      total: null,\n      listLoading: true,\n      listQuery: {\n        pageNum: 1,\n        pageSize: 5\n      },\n      parentId: 0\n    }\n  },\n  created () {\n    this.resetParentId();\n    this.getList();\n  },\n  watch: {\n    $route (route) {\n      this.resetParentId();\n      this.getList();\n    }\n  },\n  methods: {\n    resetParentId () {\n      this.listQuery.pageNum = 1;\n      if (this.$route.query.parentId != null) {\n        this.parentId = this.$route.query.parentId;\n      } else {\n        this.parentId = 0;\n      }\n    },\n    handleAddMenu () {\n      this.$router.push('/ums/addMenu');\n    },\n    getList () {\n      this.listLoading = true;\n      fetchList(this.parentId, this.listQuery).then(response => {\n        this.listLoading = false;\n        this.list = response.data.list;\n        this.total = response.data.total;\n      });\n    },\n    handleSizeChange (val) {\n      this.listQuery.pageNum = 1;\n      this.listQuery.pageSize = val;\n      this.getList();\n    },\n    handleCurrentChange (val) {\n      this.listQuery.pageNum = val;\n      this.getList();\n\n    },\n    handleHiddenChange (index, row) {\n      updateHidden(row.id, { hidden: row.hidden }).then(response => {\n        this.$message({\n          message: '修改成功',\n          type: 'success',\n          duration: 1000\n        });\n      });\n    },\n    handleShowNextLevel (index, row) {\n      this.$router.push({ path: '/ums/menu', query: { parentId: row.id } })\n    },\n    handleUpdate (index, row) {\n      this.$router.push({ path: '/ums/updateMenu', query: { id: row.id } });\n    },\n    handleDelete (index, row) {\n      this.$confirm('是否要删除该菜单', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deleteMenu(row.id).then(response => {\n          this.$message({\n            message: '删除成功',\n            type: 'success',\n            duration: 1000\n          });\n          this.getList();\n        });\n      });\n    }\n  },\n  filters: {\n    levelFilter (value) {\n      if (value === 0) {\n        return '一级';\n      } else if (value === 1) {\n        return '二级';\n      }\n    },\n    disableNextLevel (value) {\n      if (value === 0) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}