{"remainingRequest":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\src\\pages\\filedata\\fileDataGainPic.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\src\\pages\\filedata\\fileDataGainPic.vue","mtime":1709195150639},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\DIO\\Desktop\\云统战\\qianduantongzhan\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge3JlcVBpY1R5cGUscmVxR2V0QWxsUGljLHJlcUdldFR5cGVQaWMscmVxUmVtb3ZlUGljfSBmcm9tICJAL2FwaS9maWxlRGF0YS9nYWluUGljIg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdmaWxlRGF0YUdhaW5QaWMnLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBBZGRQaWN0dXJlVmlzaWJsZTogZmFsc2UsLy/mt7vliqDlr7nor53moYbmmK/lkKbmiZPlvIANCiAgICAgIGRpYWxvZ1Zpc2libGU6ZmFsc2UsLy/lm77niYfpooTop4jmlL7lpKflip/og70NCiAgICAgIGZpbGVEYXRhOiB7ZmlsZToiIix0aXRsZTogIiIsdHlwZToiIn0sLy/ova7mkq3lm77kv6Hmga8NCiAgICAgIHNlYXJjaFR5cGVWYWx1ZToiIiwvL+afpeivouWPguaVsA0KICAgICAgZGlhbG9nSW1hZ2VVcmw6ICIiLC8v5Zu+54mHVVJMDQogICAgICB0eXBlT3B0aW9uOiBbXSwNCiAgICAgIGxpc3Q6W10sDQogICAgICBwOiB7DQogICAgICBjdXJyZW50OiAxLA0KICAgICAgbnVtYmVyOjQNCiAgICAgIH0sDQogICAgICB0b3RhbDogMCwNCiAgICAgIGZsYWc6dHJ1ZSAgICAgICAgICAvL+WIhumhteaYr+afpeivoui/mOaYr+iOt+WPluaVsOaNrueahOagh+W/lw0KICAgICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIHNlYXJjaFR5cGVWYWx1ZTp7DQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaGFuZGxlcihuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgIHRoaXMucC5jdXJyZW50PTENCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+iOt+WPluWbvueJh+exu+Weiw0KICAgIGFzeW5jIGdldFBpY1R5cGUoKSB7DQogICAgICB0cnkgew0KICAgICAgICBsZXQgeyB0IDogcmVzfSA9IGF3YWl0IHJlcVBpY1R5cGUoKQ0KICAgICAgICB0aGlzLnR5cGVPcHRpb24gPSByZXMNCiAgICAgIH1jYXRjaChlcnJvcil7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v6I635Y+W5omA5pyJ5Zu+54mHDQogICAgYXN5bmMgZ2V0QWxsUGljKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHJlcUdldEFsbFBpYyh0aGlzLnApDQogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7DQogICAgICAgIHRoaXMubGlzdCA9IHJlc3VsdC50Lmxpc3QNCiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3VsdC50LnRvdGFsDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgeyANCiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybA0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgaGFuZGxlUmVtb3ZlKGZpbGUsIGZpbGVMaXN0KSB7IA0KICAgICAgY29uc29sZS5sb2coZmlsZSwgZmlsZUxpc3QpDQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2UoZmlsZSkgew0KICAgICAgdGhpcy5maWxlRGF0YS5pbWdOYW1lID0gZmlsZS5uYW1lDQogICAgfSwNCiAgICAvL+S/neWtmOS4iuS8oOWbvueJhw0KICAgIHNhdmVPclVwZGF0ZSgpIHsNCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkLnN1Ym1pdCgpDQogICAgICB0aGlzLkFkZFBpY3R1cmVWaXNpYmxlID0gZmFsc2UNCiAgICAgIGFsZXJ0KCfmt7vliqDmiJDlip8nKQ0KICAgICAgdGhpcy5wLmN1cnJlbnQ9MQ0KICAgICAgdGhpcy5nZXRBbGxQaWMoKQ0KICAgICAgdGhpcy4kcmVmcy51cGxvYWQuY2xlYXJGaWxlcygpICAvL+a4heepuuS4iuS4gOasoeeahOWbvueJh+WIl+ihqA0KICAgICAgdGhpcy5maWxlRGF0YSA9IHsgdGl0bGU6ICcnLCB0eXBlOiAnJyB9ICAgICAvL+a4heepuuS4iuS4gOasoeeahOWbvueJh+S/oeaBrw0KICAgICAgdGhpcy5kaWFsb2dJbWFnZVVybD0nJw0KICAgIH0sDQogICAgLy/mjInnsbvliKvmn6Xor6Llm77niYcNCiAgICBhc3luYyBzZWFyY2hQaWMoKSB7IA0KICAgICAgaWYgKHRoaXMuc2VhcmNoVHlwZVZhbHVlKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCByZXFHZXRUeXBlUGljKHRoaXMuc2VhcmNoVHlwZVZhbHVlLCB0aGlzLnApDQogICAgICAgIHRoaXMubGlzdCA9IHJlc3VsdC5saXN0DQogICAgICAgIHRoaXMudG90YWwgPSByZXN1bHQudG90YWwNCiAgICAgICAgdGhpcy5mbGFnPWZhbHNlDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICB9ICANCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGFsZXJ0KCLor7fovpPlhaXmn6Xor6LliIbnsbsiKQ0KICAgICAgfQ0KICAgICAgDQogICAgfSwNCiAgICAvL+afpeivouWFqOmDqOWbvueJhw0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy5zZWFyY2hUeXBlVmFsdWUgPSAiIg0KICAgICAgdGhpcy5wLmN1cnJlbnQgPSAxDQogICAgICB0aGlzLmZsYWc9dHJ1ZQ0KICAgICAgdGhpcy5nZXRBbGxQaWMoKQ0KICAgIH0sDQogICAgLy/liKDpmaTlm77niYcNCiAgICBhc3luYyByZW1vdmVEYXRhQnlJZChpdGVtLGluZGV4KSB7IA0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgcmVxUmVtb3ZlUGljKGl0ZW0uaWQsIGl0ZW0uaW1nTmFtZSkNCiAgICAgICAgdGhpcy5wLmN1cnJlbnQgPSAxDQogICAgICAgIHRoaXMuZ2V0QWxsUGljKCkNCiAgICAgICAgYWxlcnQoIuWIoOmZpOaIkOWKnyIpDQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICB9DQogICAgfSwNCiAgICAvL+WIhumhteWZqOWIh+aNoumhteaVsA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZXIpIHsNCiAgICAgIHRoaXMucC5jdXJyZW50ID0gcGFnZXINCiAgICAgIGlmICh0aGlzLmZsYWcpIHsNCiAgICAgICAgdGhpcy5nZXRBbGxQaWMoKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZWFyY2hQaWMoKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldFBpY1R5cGUoKQ0KICAgIHRoaXMuZ2V0QWxsUGljKCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["fileDataGainPic.vue"],"names":[],"mappings":";AA0FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fileDataGainPic.vue","sourceRoot":"src/pages/filedata","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 添加轮播图功能 -->\r\n    <el-button  type=\"primary\" size=\"small\" @click=\"AddPictureVisible=true\">添加</el-button>\r\n    <el-dialog title=\"添加\" :visible.sync=\"AddPictureVisible\" :show-close=\"false\" width=\"65%\" >\r\n      <h2 style=\"text-align: center\">添加轮播图</h2>\r\n      <el-form  label-width=\"120px\" style=\"marginTop:15px\">\r\n        <el-form-item label=\"轮播图名称\" prop=\"title\">\r\n          <el-input v-model=\"fileData.title\" placeholder=\"请填写轮播图名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"轮播图类型\"  style=\"marginTop:10px;\">\r\n          <el-select v-model=\"fileData.type\" clearable placeholder=\"请选择文章所属类型\" >\r\n            <el-option\r\n              v-for=\"item in typeOption\"\r\n              :key=\"item.id\"\r\n              :label=\"item.type\"\r\n              :value=\"item.id\">\r\n            </el-option>\r\n          </el-select> \r\n        </el-form-item>\r\n        <el-form-item label=\"轮播图素材\">\r\n          <el-upload \r\n            ref=\"upload\" \r\n            :on-preview=\"handlePictureCardPreview\" \r\n            :on-remove=\"handleRemove\" \r\n            :on-change=\"handleChange\" \r\n            :data=\"fileData\" \r\n            :auto-upload=\"false\" \r\n            class=\"upload-demo\" \r\n            action=\"http://localhost:9108/servicefile/AchievementOfPhoto/upload\" \r\n            list-type=\"picture-card\"\r\n          >\r\n            <i slot=\"default\" class=\"el-icon-plus\" />\r\n          </el-upload>\r\n          <!-- 图片预览放大功能 -->\r\n          <el-dialog :visible.sync=\"dialogVisible\" :modal=\"false\" :center=\"true\" >\r\n            <img :src=\"dialogImageUrl\" width=\"85%\" alt=\"\" />\r\n          </el-dialog> \r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"AddPictureVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveOrUpdate\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 选择器查询功能 -->\r\n    <template>\r\n      <el-select v-model=\"searchTypeValue\" clearable placeholder=\"请选择分类\"  style=\"marginLeft:10px\" size=\"small\" >\r\n        <el-option\r\n          v-for=\"item in typeOption\"\r\n          :key=\"item.id\"\r\n          :label=\"item.type\"\r\n          :value=\"item.id\">\r\n        </el-option>\r\n      </el-select>\r\n      <el-button type=\"primary\" style=\"marginLeft:10px\" size=\"small\" @click=\"searchPic\"> \r\n          <i class=\"el-icon-search\" style=\"marginright:5px\"></i>查询\r\n      </el-button>\r\n      <el-button style=\"marginLeft:10px\" size=\"small\" @click=\"reset\"> 查询所有</el-button>\r\n    </template>\r\n\r\n    <!-- 列表展示区 -->\r\n    <el-table :data=\"list\" :border=true  style=\"width: 100%;marginTop:15px\" >\r\n      <el-table-column prop=\"title\" label=\"名称\" align=\"center\" />\r\n      <el-table-column prop=\"imgUrl\" label=\"压缩图\" align=\"center\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <img :src=\"scope.row.imgUrl\" width=\"100\" height=\"80\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"type\" label=\"分类\" align=\"center\" width=\"200\" />\r\n      <el-table-column label=\"操作\" align=\"center\"  width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" @click=\"removeDataById(scope.row, scope.$index)\" />\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页器 -->\r\n    <el-pagination \r\n        layout=\"prev, pager, next,jumper\" \r\n        :total=\"total\" \r\n        :current-page=\"p.current\" \r\n        :page-size=\"p.number\" \r\n        @current-change=\"handleCurrentChange\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {reqPicType,reqGetAllPic,reqGetTypePic,reqRemovePic} from \"@/api/fileData/gainPic\"\r\n\r\nexport default {\r\n  name: 'fileDataGainPic',\r\n  data() {\r\n    return {\r\n      AddPictureVisible: false,//添加对话框是否打开\r\n      dialogVisible:false,//图片预览放大功能\r\n      fileData: {file:\"\",title: \"\",type:\"\"},//轮播图信息\r\n      searchTypeValue:\"\",//查询参数\r\n      dialogImageUrl: \"\",//图片URL\r\n      typeOption: [],\r\n      list:[],\r\n      p: {\r\n      current: 1,\r\n      number:4\r\n      },\r\n      total: 0,\r\n      flag:true          //分页是查询还是获取数据的标志\r\n      }\r\n  },\r\n  watch: {\r\n    searchTypeValue:{\r\n      deep: true,\r\n      handler(newVal, oldVal) {\r\n       this.p.current=1\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    //获取图片类型\r\n    async getPicType() {\r\n      try {\r\n        let { t : res} = await reqPicType()\r\n        this.typeOption = res\r\n      }catch(error){\r\n        console.log(error);\r\n      }\r\n    },\r\n    //获取所有图片\r\n    async getAllPic() {\r\n      try {\r\n        let result = await reqGetAllPic(this.p)\r\n        console.log(result);\r\n        this.list = result.t.list\r\n        this.total = result.t.total\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    handlePictureCardPreview(file) { \r\n      this.dialogImageUrl = file.url\r\n      this.dialogVisible = true\r\n    },\r\n    handleRemove(file, fileList) { \r\n      console.log(file, fileList)\r\n    },\r\n    handleChange(file) {\r\n      this.fileData.imgName = file.name\r\n    },\r\n    //保存上传图片\r\n    saveOrUpdate() {\r\n      this.$refs.upload.submit()\r\n      this.AddPictureVisible = false\r\n      alert('添加成功')\r\n      this.p.current=1\r\n      this.getAllPic()\r\n      this.$refs.upload.clearFiles()  //清空上一次的图片列表\r\n      this.fileData = { title: '', type: '' }     //清空上一次的图片信息\r\n      this.dialogImageUrl=''\r\n    },\r\n    //按类别查询图片\r\n    async searchPic() { \r\n      if (this.searchTypeValue) {\r\n        try {\r\n        let result = await reqGetTypePic(this.searchTypeValue, this.p)\r\n        this.list = result.list\r\n        this.total = result.total\r\n        this.flag=false\r\n      } catch (error) {\r\n        console.log(error);\r\n      }  \r\n      } else {\r\n        alert(\"请输入查询分类\")\r\n      }\r\n      \r\n    },\r\n    //查询全部图片\r\n    reset() {\r\n      this.searchTypeValue = \"\"\r\n      this.p.current = 1\r\n      this.flag=true\r\n      this.getAllPic()\r\n    },\r\n    //删除图片\r\n    async removeDataById(item,index) { \r\n      try {\r\n        await reqRemovePic(item.id, item.imgName)\r\n        this.p.current = 1\r\n        this.getAllPic()\r\n        alert(\"删除成功\")\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    //分页器切换页数\r\n    handleCurrentChange(pager) {\r\n      this.p.current = pager\r\n      if (this.flag) {\r\n        this.getAllPic()\r\n      } else {\r\n        this.searchPic()\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getPicType()\r\n    this.getAllPic()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cell{\r\n  text-align: center;\r\n}\r\n\r\n::v-deep  .el-pagination{\r\n  position: absolute;\r\n  top: 650px;\r\n  left: 45%;\r\n}\r\n</style>"]}]}